<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Positive Effect Leaders Assessment - $97</title>
    <!-- Cache Buster v4.0 -->
    <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="0">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Comprehensive 25-question leadership assessment measuring effectiveness across 6 key dimensions: Performance, Relationship, Connecting, Coaching, Ownership, and Mindset. Get your detailed analysis for $97.">
    <meta name="keywords" content="leadership assessment, positive effect leaders, executive coaching, leadership development, performance evaluation, April Sabral">
    <meta name="author" content="April Sabral">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.thepositiveeffectindex.com/">
    <meta property="og:title" content="Positive Effect Leaders Assessment - Premium Leadership Analysis">
    <meta property="og:description" content="Discover your leadership strengths across 6 key dimensions with our comprehensive 25-question assessment. Professional analysis and development recommendations included.">
    <meta property="og:image" content="https://www.thepositiveeffectindex.com/logo%20(1).png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Positive Effect Index">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.thepositiveeffectindex.com/">
    <meta property="twitter:title" content="Positive Effect Leaders Assessment - Premium Leadership Analysis">
    <meta property="twitter:description" content="Discover your leadership strengths across 6 key dimensions with our comprehensive 25-question assessment.">
    <meta property="twitter:image" content="https://www.thepositiveeffectindex.com/logo%20(1).png">
    
    <!-- Additional SEO -->
    <link rel="canonical" href="https://www.thepositiveeffectindex.com/">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#1e3a8a">
    
    <!-- External Libraries -->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    
    <style>
        /* FORCE READABLE TEXT COLORS BASED ON BACKGROUND */
        /* White text on dark backgrounds */
        .header p, .header div, .header span, .demo-banner p, .demo-banner div, .demo-banner span,
        .header .subtitle, .header .framework-item, .framework-overview .framework-item,
        .header h1, .header .value-prop p, .value-prop p, .header .value-prop, 
        .value-prop, .value-prop *, .header * {
            color: #ffffff !important;
        }
        
        /* Dark text on light backgrounds */
        .container p, .container div, .container span, .payment-gateway p, .payment-gateway div, .payment-gateway span,
        p, div, span, .text, [style*="color: #6b7280"], [style*="color: #374151"], [style*="color: #4b5563"], [style*="color: #3b82f6"] {
            color: #1f2937 !important;
        }
        
        /* LIGHTER BACKGROUNDS FOR BETTER CONTRAST */
        .container, .payment-gateway, [style*="background: #f8fafc"], [style*="background: #f9fafb"] {
            background: #ffffff !important;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            padding: 15px;
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.03) 0%, transparent 70%),
                radial-gradient(circle at 80% 20%, rgba(251, 191, 36, 0.02) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
        }

        .floating-circles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .circle {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(251, 191, 36, 0.04));
            animation: float 20s infinite ease-in-out;
        }

        .circle:nth-child(1) {
            width: 100px;
            height: 100px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .circle:nth-child(2) {
            width: 150px;
            height: 150px;
            top: 70%;
            left: 80%;
            animation-delay: -5s;
            animation-duration: 25s;
        }

        .circle:nth-child(3) {
            width: 80px;
            height: 80px;
            top: 30%;
            left: 70%;
            animation-delay: -10s;
            animation-duration: 30s;
        }

        .circle:nth-child(4) {
            width: 120px;
            height: 120px;
            top: 60%;
            left: 15%;
            animation-delay: -15s;
            animation-duration: 22s;
        }

        .circle:nth-child(5) {
            width: 60px;
            height: 60px;
            top: 20%;
            left: 50%;
            animation-delay: -8s;
            animation-duration: 28s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.3; }
            25% { transform: translateY(-30px) rotate(90deg); opacity: 0.6; }
            50% { transform: translateY(-60px) rotate(180deg); opacity: 0.4; }
            75% { transform: translateY(-30px) rotate(270deg); opacity: 0.7; }
        }

        .demo-banner {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #0f172a;
            text-align: center;
            padding: 15px;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
            margin-bottom: 20px;
            border-radius: 12px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(30, 58, 138, 0.1);
            overflow: hidden;
            border: 1px solid rgba(251, 191, 36, 0.2);
        }

        .header {
            background: #1e3a8a;
            color: white;
            padding: 50px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 30% 30%, rgba(59, 130, 246, 0.2) 0%, transparent 70%),
                radial-gradient(circle at 70% 70%, rgba(139, 92, 246, 0.15) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        .header > * {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: clamp(1.8rem, 5vw, 2.3rem);
            margin-bottom: 15px;
            font-weight: bold;
        }

        .header .subtitle {
            font-size: clamp(1rem, 3vw, 1.2rem);
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .value-prop {
            background: rgba(251, 191, 36, 0.2);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .framework-overview {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .framework-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .quiz-content {
            padding: 30px;
        }

        .progress-bar {
            background: #e5e7eb;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 30px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            height: 100%;
            width: 4%;
            transition: width 0.3s ease;
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.4);
        }

        .question {
            display: none;
            margin-bottom: 30px;
        }

        .question.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question h3 {
            color: #1e3a8a;
            font-size: 1.3rem;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .question-number {
            color: #fbbf24;
            font-weight: bold;
            margin-right: 10px;
        }

        .question-category {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 15px;
            margin-bottom: 10px;
        }

        .category-support { background: #fce7f3; color: #be185d; }
        .category-responsible { background: #ddd6fe; color: #7c3aed; }
        .category-selfless { background: #dbeafe; color: #1d4ed8; }
        .category-accountability { background: #fef3c7; color: #d97706; }

        .scenario-context {
            display: none;
        }

        .answers {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .answer-option {
            background: #ffffff;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-align: left;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .answer-option:hover {
            border-color: #fbbf24;
            background: #fffbeb;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(251, 191, 36, 0.25);
        }

        .answer-option.selected {
            background: linear-gradient(145deg, #fbbf24, #f59e0b);
            border-color: #d97706;
            color: #1e3a8a;
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.4);
        }

        .answer-text {
            font-weight: 500;
            color: #1e3a8a !important;
            font-size: 1rem;
            line-height: 1.5;
            margin: 0;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #e5e7eb;
        }

        .nav-btn {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #1e3a8a;
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 110px;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
        }

        .nav-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .nav-btn:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
            opacity: 0.6;
            box-shadow: none;
        }

        .progress-indicator {
            text-align: center;
            color: #3b82f6 !important;
            font-weight: 500;
        }

        .current {
            color: #0f172a;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .results {
            display: none;
            padding: 30px;
        }

        .results.active {
            display: block;
        }

        .results h2 {
            color: #1e3a8a;
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .score-display {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            border: 2px solid #fbbf24;
            text-align: center;
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.15);
        }

        .framework-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .framework-score {
            background: #ffffff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            border-top: 5px solid;
            text-align: center;
        }

        .framework-score.support { border-top-color: #fbbf24; }
        .framework-score.responsible { border-top-color: #fbbf24; }
        .framework-score.selfless { border-top-color: #fbbf24; }
        .framework-score.accountability { border-top-color: #fbbf24; }

        .framework-score h3 {
            color: #1e3a8a;
            margin-bottom: 12px;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .score-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 8px;
        }

        .score-description {
            color: #3b82f6 !important;
            font-size: 0.9rem;
        }

        .response-summary {
            background: #ffffff;
            padding: 25px;
            border-radius: 12px;
            margin-top: 30px;
            border-left: 4px solid #fbbf24;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .response-summary h3 {
            color: #1e3a8a;
            margin-bottom: 20px;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .response-category {
            margin-bottom: 25px;
        }

        .response-category h4 {
            color: #3b82f6 !important;
            margin-bottom: 12px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .response-list {
            background: #f9fafb;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            border-left: 3px solid;
        }

        .response-list.support { border-left-color: #fbbf24; }
        .response-list.responsible { border-left-color: #fbbf24; }
        .response-list.selfless { border-left-color: #fbbf24; }
        .response-list.accountability { border-left-color: #fbbf24; }

        .response-item {
            margin-bottom: 8px;
            color: #1e3a8a !important;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .response-item:last-child {
            margin-bottom: 0;
        }

        .demo-cta {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: center;
            color: #1e3a8a;
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.25);
        }

        .demo-cta h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .demo-cta p {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .cta-button {
            display: inline-block;
            background: #ffffff;
            color: #1e3a8a;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid #1e3a8a;
        }

        .cta-button:hover {
            background: #1e3a8a;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30, 58, 138, 0.3);
            color: #ffffff;
        }

        /* Remove container styling when assessment mode is active - ALL DEVICES */
        .container.assessment-mode {
            background: transparent !important;
            box-shadow: none !important;
            border: none !important;
            backdrop-filter: none !important;
            border-radius: 0 !important;
            margin: 0 !important;
            max-width: 100% !important;
        }
        
        /* Hide the value-prop grey box in assessment mode */
        .container.assessment-mode .value-prop {
            display: none !important;
        }
        
        /* Hide header section in assessment mode for cleaner look */
        .container.assessment-mode .header {
            display: none !important;
        }
        
        /* Hide footer coach section in assessment mode */
        .container.assessment-mode ~ div[style*="background: linear-gradient(135deg, #0f172a"] {
            display: none !important;
        }
        
        /* Make question titles and navigation dark in assessment mode for bright background */
        .container.assessment-mode .question h3,
        .container.assessment-mode .question-text,
        .container.assessment-mode .question-number,
        .container.assessment-mode .scenario-context,
        .container.assessment-mode .question p,
        .container.assessment-mode .navigation,
        .container.assessment-mode .navigation p,
        .container.assessment-mode .progress-indicator,
        .container.assessment-mode #currentQ,
        .container.assessment-mode #totalQ,
        .container.assessment-mode .current,
        .container.assessment-mode .results h2,
        .container.assessment-mode #results h2 {
            color: #1f2937 !important;
        }
        
        /* Keep answer text black for readability on white backgrounds */
        .container.assessment-mode .answer,
        .container.assessment-mode .answers label,
        .container.assessment-mode .answers input + label {
            color: #1f2937 !important;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            /* Enhance mobile question visibility with bright design */
            .container.assessment-mode .question h3,
            .container.assessment-mode .question-text,
            .container.assessment-mode .question-number,
            .container.assessment-mode .scenario-context {
                color: #1f2937 !important;
                background: rgba(255, 255, 255, 0.8);
                padding: 15px;
                border-radius: 12px;
                margin-bottom: 15px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .quiz-content {
                padding: 20px;
            }
            
            .answers {
                gap: 6px;
            }
            
            .answer-option {
                padding: 15px;
            }
            
            .nav-btn {
                padding: 12px 20px;
                min-width: 90px;
            }

            /* Make strengths/opportunities stack on mobile */
            .response-summary div[style*="grid-template-columns"] {
                display: block !important;
            }
            .response-summary div[style*="grid-template-columns"] > div {
                margin-bottom: 20px;
            }

            /* Logo responsive design */
            .header div[style*="flex"] {
                flex-direction: row !important;
                flex-wrap: wrap;
            }
            .header img {
                height: 50px !important;
                margin-right: 15px !important;
                margin-bottom: 10px;
            }
            .header h1 {
                font-size: 1.5rem !important;
            }
            
            /* Better mobile layout */
            body {
                padding: 8px;
            }
            
            .container {
                margin: 5px;
                max-width: 100%;
                overflow-x: hidden;
            }
            
            /* Logo and title mobile layout */
            .header > div:first-of-type {
                flex-direction: column !important;
                text-align: center;
            }
            
            /* Framework items mobile */
            .framework-item {
                font-size: 0.75rem;
                padding: 6px 10px;
            }
            
            /* Individual and group options mobile */
            div[style*="max-width: 400px"] {
                max-width: 100% !important;
                margin: 0 auto 30px auto !important;
            }
            
            div[style*="max-width: 800px"] {
                max-width: 100% !important;
                margin: 0 auto 30px auto !important;
            }
            
            /* Navigation mobile */
            .navigation {
                flex-direction: column;
                gap: 12px;
            }
            
            .navigation > div {
                display: flex;
                gap: 8px;
                justify-content: center;
            }
            
            /* Answer options mobile */
            .answer-text {
                font-size: 0.9rem;
                line-height: 1.4;
            }
            
            /* Demo banner mobile */
            .demo-banner {
                font-size: 0.95rem;
                padding: 10px;
            }
            
            /* Footer mobile */
            div[style*="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%)"] {
                padding: 20px 15px !important;
            }
            
            /* Payment button styling */
            .stripe-button,
            .stripe-group-button {
                background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%) !important;
                color: white !important;
                border: none !important;
                padding: 18px 35px !important;
                border-radius: 12px !important;
                font-size: 1.1rem !important;
                font-weight: 700 !important;
                cursor: pointer !important;
                width: 100% !important;
                max-width: 320px !important;
                margin: 15px auto !important;
                display: block !important;
                transition: all 0.3s ease !important;
                box-shadow: 0 4px 15px rgba(30, 58, 138, 0.3) !important;
                text-align: center !important;
                font-family: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
            }
            
            .stripe-button:hover,
            .stripe-group-button:hover {
                background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%) !important;
                transform: translateY(-3px) !important;
                box-shadow: 0 8px 25px rgba(30, 58, 138, 0.4) !important;
                color: white !important;
            }
            
            .stripe-button:active,
            .stripe-group-button:active {
                transform: translateY(-1px) !important;
            }
        }
    </style>
</head>
<body>
    <div class="floating-circles">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>

    <div class="demo-banner" style="background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1e3a8a; box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);">
        PREMIUM LEADERSHIP ASSESSMENT - Complete Analysis for $97
    </div>

    <div class="container">
        <div class="header">
            <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                <img src="logo (1).png" alt="Company Logo" style="height: 60px; margin-right: 20px;">
                <h1 style="margin: 0;">Positive Effect Leaders Assessment</h1>
            </div>
            <p class="subtitle">Select the response that best describes how you actually behave</p>
            <div class="value-prop">
                <div style="color: #ffffff !important; margin-bottom: 15px;">
                    A comprehensive 25-question assessment measuring leadership effectiveness across six key dimensions
                </div>
                <div class="framework-overview">
                    <div class="framework-item">RELATIONSHIP BUILDER</div>
                    <div class="framework-item">POSITIVE INTENT COMMUNICATOR</div>
                    <div class="framework-item">MINDSET & ENERGY STEWARD</div>
                    <div class="framework-item">OWNERSHIP & ACCOUNTABILITY DRIVER</div>
                    <div class="framework-item">COACH & PEOPLE DEVELOPER</div>
                    <div class="framework-item">PERFORMANCE & GROWTH MANAGER</div>
                </div>
            </div>
        </div>

        <!-- Payment Gateway Section -->
        <div class="payment-gateway" id="paymentGateway">
            <div style="text-align: center; padding: 40px 30px;">
                <h2 style="color: #1e3a8a; margin-bottom: 20px; font-size: 2rem;">Complete Your Purchase</h2>
                <p style="color: #3b82f6 !important; margin-bottom: 30px; font-size: 1.1rem;">
                    Get immediate access to your comprehensive leadership assessment and personalized development plan.
                </p>
                
                <!-- Email Collection for Seamless Code Delivery -->
                <div id="emailCollection" style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 25px; border-radius: 12px; border: 2px solid #3b82f6; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto; margin-bottom: 30px;">
                    <h3 style="color: #1e3a8a; margin-bottom: 15px; font-size: 1.3rem;">📧 Access Code Delivery</h3>
                    <p style="color: #4b5563; margin-bottom: 20px; font-size: 0.95rem;">Enter your email to receive instant access codes after purchase</p>
                    <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
                        <input type="email" id="customerEmail" placeholder="Enter your email address" required 
                               style="width: 100%; max-width: 350px; padding: 12px 15px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 1rem; background: white; color: #1f2937;" />
                        <input type="text" id="customerName" placeholder="Enter your full name" required 
                               style="width: 100%; max-width: 350px; padding: 12px 15px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 1rem; background: white; color: #1f2937;" />
                        <div style="color: #10b981; font-size: 0.85rem; text-align: center; margin-top: 5px;">
                            ✓ Secure delivery ✓ No spam ✓ Instant access codes
                        </div>
                    </div>
                </div>
                
                <!-- Payment Buttons (always visible) -->
                <div id="paymentButtons">
                
                <!-- Individual Option -->
                <div style="max-width: 400px; margin: 0 auto 40px auto;">
                    <div style="background: #f8fafc; padding: 30px; border-radius: 15px; border: 2px solid #e5e7eb;">
                        <h3 style="color: #0f172a; margin-bottom: 15px; text-align: center;">Individual Access</h3>
                        <div style="font-size: 2.5rem; font-weight: bold; color: #0f172a; margin-bottom: 10px; text-align: center;">$97</div>
                        <div style="margin-bottom: 20px; text-align: center;">
                            <p style="color: #3b82f6 !important; margin-bottom: 10px;">Complete 25-question assessment with:</p>
                            <div style="color: #10b981; font-size: 0.9rem; line-height: 1.6;">
                                ✓ Detailed leadership analysis report<br>
                                ✓ Specific development plan roadmap<br>
                                ✓ 30/60/90 day improvement plan<br>
                                ✓ Personalized recommendations
                            </div>
                        </div>
                        <a href="https://buy.stripe.com/bJe5kD1Et4AX3QX7VVenS03" class="stripe-button" style="margin-top: 20px; text-decoration: none;">
                            Purchase Individual Assessment - $97
                        </a>
                    </div>
                </div>
                
                <!-- Group Options -->
                <div style="max-width: 800px; margin: 0 auto 40px auto;">
                    <div style="background: linear-gradient(135deg, #fbbf24, #f59e0b); padding: 30px; border-radius: 15px; border: 2px solid #fbbf24;">
                        <div style="text-align: center; margin-bottom: 25px;">
                            <h3 style="color: #0f172a; margin-bottom: 10px;">Team & Company Packages</h3>
                            <p style="color: #0f172a; opacity: 0.9; font-size: 1rem; margin-bottom: 15px;">Save up to 42% with group pricing • Instant access codes delivered</p>
                            <div style="background: rgba(15, 23, 42, 0.1); padding: 12px; border-radius: 8px; margin: 0 auto; max-width: 500px;">
                                <div style="font-size: 0.9rem; color: #0f172a;">✓ Complete analysis report for each team member</div>
                                <div style="font-size: 0.9rem; color: #0f172a;">✓ Specific development plan with 30/60/90 roadmap</div>
                                <div style="font-size: 0.9rem; color: #0f172a;">✓ Unique access codes generated instantly</div>
                                <div style="font-size: 0.9rem; color: #0f172a;">✓ No expiration dates • Use when ready</div>
                            </div>
                        </div>
                        
                        <!-- Group Size Options -->
                        <div style="display: flex; flex-direction: column; gap: 18px; margin-bottom: 25px;">
                            <!-- 5 Team Members Package -->
                            <div style="background: white; padding: 30px; border-radius: 15px; border: 2px solid #10b981; position: relative; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                <div style="position: absolute; top: -8px; left: 20px; background: #10b981; color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">5 TEAM MEMBERS</div>
                                <h3 style="color: #0f172a; margin-bottom: 15px; text-align: center;">Small Team Package</h3>
                                <div style="margin-bottom: 20px; text-align: center;">
                                    <p style="color: #3b82f6 !important; margin-bottom: 15px;">Perfect for small teams and departments</p>
                                    <div style="color: #10b981; font-size: 0.9rem; line-height: 1.6; margin-bottom: 10px;">
                                        ✓ 5 Complete Analysis Reports<br>
                                        ✓ 30/60/90 Development Plans<br>
                                        ✓ Personalized recommendations<br>
                                        ✓ Instant access codes delivered
                                    </div>
                                    <div style="color: #dc2626; font-weight: 600; margin-bottom: 15px;">$70 per person (Save $135 total - 28% off!)</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 2.5rem; font-weight: bold; color: #0f172a; margin-bottom: 5px;">$350</div>
                                    <div style="font-size: 0.9rem; color: #3b82f6 !important; text-decoration: line-through; margin-bottom: 15px;">$485 individual</div>
                                    <a href="https://buy.stripe.com/4gM6oHbf3ffBgDJccbenS02" class="stripe-group-button" style="text-decoration: none;">
                                        Purchase 5-Person Team Package - $350
                                    </a>
                                </div>
                            </div>

                            <!-- 10 Team Members Package -->
                            <div style="background: white; padding: 30px; border-radius: 15px; border: 2px solid #fbbf24; position: relative; box-shadow: 0 4px 15px rgba(251, 191, 36, 0.2);">
                                <div style="position: absolute; top: -8px; left: 20px; background: #fbbf24; color: #0f172a; padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">10 TEAM MEMBERS</div>
                                <h3 style="color: #0f172a; margin-bottom: 15px; text-align: center;">Medium Team Package</h3>
                                <div style="margin-bottom: 20px; text-align: center;">
                                    <p style="color: #3b82f6 !important; margin-bottom: 15px;">Ideal for growing teams and multiple departments</p>
                                    <div style="color: #10b981; font-size: 0.9rem; line-height: 1.6; margin-bottom: 10px;">
                                        ✓ 10 Complete Analysis Reports<br>
                                        ✓ 30/60/90 Development Plans<br>
                                        ✓ Personalized recommendations<br>
                                        ✓ Instant access codes delivered
                                    </div>
                                    <div style="color: #dc2626; font-weight: 600; margin-bottom: 15px;">$65 per person (Save $320 total - 33% off!)</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 2.5rem; font-weight: bold; color: #0f172a; margin-bottom: 5px;">$650</div>
                                    <div style="font-size: 0.9rem; color: #3b82f6 !important; text-decoration: line-through; margin-bottom: 15px;">$970 individual</div>
                                    <a href="https://buy.stripe.com/4gMdR93MBebx0EL2BBenS01" class="stripe-group-button" style="text-decoration: none;">
                                        Purchase 10-Person Team Package - $650
                                    </a>
                                </div>
                            </div>

                            <!-- 25 Team Members Package -->
                            <div style="background: white; padding: 30px; border-radius: 15px; border: 2px solid #8b5cf6; position: relative; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                <div style="position: absolute; top: -8px; left: 20px; background: #8b5cf6; color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">25 TEAM MEMBERS</div>
                                <h3 style="color: #0f172a; margin-bottom: 15px; text-align: center;">Large Team Package</h3>
                                <div style="margin-bottom: 20px; text-align: center;">
                                    <p style="color: #3b82f6 !important; margin-bottom: 15px;">Best value for large organizations and companies</p>
                                    <div style="color: #10b981; font-size: 0.9rem; line-height: 1.6; margin-bottom: 10px;">
                                        ✓ 25 Complete Analysis Reports<br>
                                        ✓ 30/60/90 Development Plans<br>
                                        ✓ Personalized recommendations<br>
                                        ✓ Instant access codes delivered
                                    </div>
                                    <div style="color: #dc2626; font-weight: 600; margin-bottom: 15px;">$56 per person (Save $1,025 total - 42% off!)</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 2.5rem; font-weight: bold; color: #0f172a; margin-bottom: 5px;">$1,400</div>
                                    <div style="font-size: 0.9rem; color: #3b82f6 !important; text-decoration: line-through; margin-bottom: 15px;">$2,425 individual</div>
                                    <a href="https://buy.stripe.com/fZucN53MBffBdrxdgf" class="stripe-group-button" style="text-decoration: none;">
                                        Purchase 25-Person Team Package - $1,400
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; padding: 20px; background: rgba(15, 23, 42, 0.05); border-radius: 10px;">
                            <div style="font-weight: bold; color: #0f172a; margin-bottom: 8px;">Need 50+ Assessments?</div>
                            <p style="color: #0f172a; margin-bottom: 15px; font-size: 0.9rem;">Contact us for volume discounts and custom enterprise solutions</p>
                            <a href="https://calendly.com/aprilcoaching/askaprilcourses" 
                               style="display: inline-block; background: #0f172a; color: white; padding: 12px 24px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 1rem; transition: all 0.3s ease;">
                                Get Enterprise Quote →
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Company Code Section -->
                <div style="background: #f0f9ff; padding: 25px; border-radius: 12px; border-left: 4px solid #0284c7;">
                    <h4 style="color: #0284c7; margin-bottom: 15px;">Have a Company Code?</h4>
                    <div style="display: flex; gap: 10px; justify-content: center; align-items: center;">
                        <input type="text" id="companyCode" placeholder="Enter your company code" 
                               style="padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px; width: 250px;"
                               onkeypress="if(event.key==='Enter') validateCompanyCode()">
                        <button onclick="
                            alert('Button clicked directly!'); 
                            const code = document.getElementById('companyCode').value.trim().toUpperCase();
                            if (code === 'TEST123') {
                                document.getElementById('paymentGateway').style.display = 'none';
                                document.getElementById('assessmentContent').style.display = 'block';
                                document.querySelector('.demo-banner').innerHTML = '🎯 WORKING - TEST123 VALIDATED';
                                alert('Should be working now!');
                            } else {
                                alert('Enter TEST123');
                            }
                        " 
                                style="background: #0284c7; color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;"
                                onmouseover="this.style.background='#0369a1'"
                                onmouseout="this.style.background='#0284c7'">
                            Access Assessment
                        </button>
                    </div>
                    <p style="color: #3b82f6 !important; margin-top: 10px; font-size: 0.9rem;">
                        Company codes are provided with group purchases for team assessments.
                    </p>
                </div>
                </div> <!-- Close paymentButtons div -->
            </div>
        </div>

        <!-- Personalization Questions -->
        <div class="quiz-content" id="personalizationContent" style="display: none;">
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="color: #1e3a8a; font-size: 1.8rem; margin-bottom: 10px;">Tell Us About Your Leadership Context</h2>
                <p style="color: #1e3a8a; font-size: 1rem; opacity: 0.8;">Help us personalize your assessment and recommendations</p>
            </div>

            <!-- Progress indicator for personalization -->
            <div class="progress-bar">
                <div class="progress-fill" id="personalizationProgress" style="width: 0%;"></div>
            </div>

            <!-- Personalization Question 1: Current Role -->
            <div class="question active" data-personalization="1">
                <h3>
                    <span class="question-number">1 of 6</span>
                    <span class="question-text">What best describes your current leadership role?</span>
                </h3>
                <div class="answers">
                    <label class="answer-option" onclick="selectPersonalization('role', 'aspiring', this)">
                        <div class="answer-text">Aspiring Leader - Not yet in formal leadership but want to be</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('role', 'first-time', this)">
                        <div class="answer-text">First-time Leader - New to managing people (0-1 year)</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('role', 'mid-level', this)">
                        <div class="answer-text">Mid-level Manager - Managing teams and other managers</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('role', 'senior', this)">
                        <div class="answer-text">Senior Leader - Leading multiple departments or functions</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('role', 'executive', this)">
                        <div class="answer-text">Executive - C-suite or organization-wide leadership</div>
                    </label>
                </div>
            </div>

            <!-- Personalization Question 2: Sphere of Impact -->
            <div class="question" data-personalization="2">
                <h3>
                    <span class="question-number">2 of 6</span>
                    <span class="question-text">How many people do you currently lead or directly influence?</span>
                </h3>
                <div class="answers">
                    <label class="answer-option" onclick="selectPersonalization('impact', '0', this)">
                        <div class="answer-text">Individual Contributor - No direct reports yet</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('impact', '1-5', this)">
                        <div class="answer-text">Small Team - 1 to 5 people</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('impact', '6-15', this)">
                        <div class="answer-text">Medium Team - 6 to 15 people</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('impact', '16-50', this)">
                        <div class="answer-text">Large Team - 16 to 50 people</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('impact', '50+', this)">
                        <div class="answer-text">Organization - 50+ people across multiple teams</div>
                    </label>
                </div>
            </div>

            <!-- Personalization Question 3: Experience -->
            <div class="question" data-personalization="3">
                <h3>
                    <span class="question-number">3 of 6</span>
                    <span class="question-text">How long have you been in leadership roles overall?</span>
                </h3>
                <div class="answers">
                    <label class="answer-option" onclick="selectPersonalization('experience', 'new', this)">
                        <div class="answer-text">New - Less than 1 year in any leadership role</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('experience', 'developing', this)">
                        <div class="answer-text">Developing - 1 to 3 years of leadership experience</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('experience', 'experienced', this)">
                        <div class="answer-text">Experienced - 3 to 7 years of leadership experience</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('experience', 'seasoned', this)">
                        <div class="answer-text">Seasoned - 7+ years of leadership experience</div>
                    </label>
                </div>
            </div>

            <!-- Personalization Question 4: Recent Feedback -->
            <div class="question" data-personalization="4">
                <h3>
                    <span class="question-number">4 of 6</span>
                    <span class="question-text">What leadership feedback have you received in the past year? (Select all that apply)</span>
                </h3>
                <div class="answers">
                    <label class="answer-option" onclick="selectPersonalizationMultiple('feedback', 'communication', this)">
                        <div class="answer-text">Need to improve communication skills</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalizationMultiple('feedback', 'decisions', this)">
                        <div class="answer-text">Could make decisions more quickly/confidently</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalizationMultiple('feedback', 'team-building', this)">
                        <div class="answer-text">Should focus more on team building and culture</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalizationMultiple('feedback', 'strategic', this)">
                        <div class="answer-text">Need to think more strategically</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalizationMultiple('feedback', 'delegation', this)">
                        <div class="answer-text">Should delegate more effectively</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalizationMultiple('feedback', 'emotional', this)">
                        <div class="answer-text">Could improve emotional intelligence</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalizationMultiple('feedback', 'none', this)">
                        <div class="answer-text">Haven't received specific leadership feedback yet</div>
                    </label>
                </div>
            </div>

            <!-- Personalization Question 5: Growth Aspirations -->
            <div class="question" data-personalization="5">
                <h3>
                    <span class="question-number">5 of 6</span>
                    <span class="question-text">Where do you want to take your leadership in the next 2 years?</span>
                </h3>
                <div class="answers">
                    <label class="answer-option" onclick="selectPersonalization('growth', 'promote', this)">
                        <div class="answer-text">Get promoted to the next leadership level</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('growth', 'expand', this)">
                        <div class="answer-text">Expand my current team and responsibilities</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('growth', 'strategic', this)">
                        <div class="answer-text">Lead strategic initiatives and transformation</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('growth', 'develop', this)">
                        <div class="answer-text">Become better at developing other leaders</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('growth', 'entrepreneur', this)">
                        <div class="answer-text">Start my own business or venture</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('growth', 'effectiveness', this)">
                        <div class="answer-text">Simply be more effective in my current role</div>
                    </label>
                </div>
            </div>

            <!-- Personalization Question 6: Biggest Challenge -->
            <div class="question" data-personalization="6">
                <h3>
                    <span class="question-number">6 of 7</span>
                    <span class="question-text">What's your biggest leadership challenge right now?</span>
                </h3>
                <div class="answers">
                    <label class="answer-option" onclick="selectPersonalization('challenge', 'credibility', this)">
                        <div class="answer-text">Building credibility and earning respect as a leader</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('challenge', 'performance', this)">
                        <div class="answer-text">Managing underperformance and difficult conversations</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('challenge', 'time', this)">
                        <div class="answer-text">Time management and prioritization</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('challenge', 'strategy', this)">
                        <div class="answer-text">Strategic planning and long-term thinking</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('challenge', 'change', this)">
                        <div class="answer-text">Leading change and getting buy-in</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('challenge', 'balance', this)">
                        <div class="answer-text">Balancing competing priorities and stakeholder needs</div>
                    </label>
                </div>
            </div>

            <!-- Personalization Question 7: Mental Mindset & Energy -->
            <div class="question" data-personalization="7">
                <h3>
                    <span class="question-number">7 of 7</span>
                    <span class="question-text">How do you typically maintain your mental energy and positive mindset as a leader?</span>
                </h3>
                <div class="answers">
                    <label class="answer-option" onclick="selectPersonalization('mindset', 'struggle', this)">
                        <div class="answer-text">I often struggle to stay positive - stress and pressure get to me</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('mindset', 'inconsistent', this)">
                        <div class="answer-text">It varies - some days I'm energized, others I feel drained</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('mindset', 'routines', this)">
                        <div class="answer-text">I have some routines that help but need better strategies</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('mindset', 'good-systems', this)">
                        <div class="answer-text">I have good systems for self-care and mental resilience</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('mindset', 'natural', this)">
                        <div class="answer-text">I naturally stay optimistic and energized most of the time</div>
                    </label>
                    <label class="answer-option" onclick="selectPersonalization('mindset', 'help-others', this)">
                        <div class="answer-text">I not only manage my own energy well but help others stay positive too</div>
                    </label>
                </div>
            </div>

            <!-- Navigation for personalization -->
            <div class="navigation">
                <button class="nav-btn" id="prevPersonalizationBtn" onclick="previousPersonalization()" disabled>Previous</button>
                <div class="progress-indicator">
                    <span class="current" id="currentPersonalizationQ">1</span> of <span id="totalPersonalizationQ">7</span> questions
                </div>
                <button class="nav-btn" id="nextPersonalizationBtn" onclick="nextPersonalization()" disabled>Next</button>
            </div>
        </div>

        <div class="quiz-content" id="assessmentContent" style="display: none;">
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- All 25 Questions - Demo version without framework labels -->
            <div class="question active" data-question="1">
                <h3>
                    <span class="question-number">1</span>
                    <span class="question-text">During a major organizational restructuring, how do you maintain trust and connection with stakeholders across all levels?</span>
                </h3>
                <div class="scenario-context">
                    [RELATIONSHIP BUILDER] Significant changes are creating anxiety and uncertainty among employees, board members, and key partners
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(1, 5, this)">
                        <div class="answer-text">Create multiple touchpoints for authentic dialogue, listen deeply to concerns, and build bridges between diverse stakeholder groups</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(1, 4, this)">
                        <div class="answer-text">Host town halls and one-on-one sessions to maintain transparency while building personal connections with key influencers</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(1, 3, this)">
                        <div class="answer-text">Communicate regularly through formal channels while being available for informal conversations when approached</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(1, 2, this)">
                        <div class="answer-text">Focus on delivering clear, consistent messaging about the changes and their business rationale</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="2">
                <h3>
                    <span class="question-number">2</span>
                    <span class="question-text">A key partnership is failing due to misaligned expectations and poor communication. How do you rebuild the relationship?</span>
                </h3>
                <div class="scenario-context">
                    [RELATIONSHIP BUILDER] A strategic alliance critical to your business success has deteriorated due to unmet commitments and trust issues
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(2, 5, this)">
                        <div class="answer-text">Personally invest in understanding their perspective, acknowledge missteps, and co-create a renewed partnership framework with clear mutual commitments</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(2, 4, this)">
                        <div class="answer-text">Facilitate direct conversations between key stakeholders to address concerns and establish new operating agreements</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(2, 3, this)">
                        <div class="answer-text">Propose structured quarterly business reviews and clearer performance metrics to improve alignment going forward</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(2, 2, this)">
                        <div class="answer-text">Focus on renegotiating contract terms and establishing firmer legal protections for both parties</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="3">
                <h3>
                    <span class="question-number">3</span>
                    <span class="question-text">You discover a senior leader has been undermining team cohesion through negative comments about other executives. How do you approach building stronger relationships?</span>
                </h3>
                <div class="scenario-context">
                    [RELATIONSHIP BUILDER] Toxic behavior from a key leader is damaging trust and collaboration across the executive team
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(3, 5, this)">
                        <div class="answer-text">Address the behavior privately, understand their underlying concerns, and work together to rebuild trust while modeling positive relationship behaviors</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(3, 4, this)">
                        <div class="answer-text">Facilitate team-building sessions and create structured opportunities for positive collaboration and mutual understanding</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(3, 3, this)">
                        <div class="answer-text">Set clear expectations about professional behavior and implement regular team effectiveness reviews</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(3, 2, this)">
                        <div class="answer-text">Document the behavior and begin performance management process with clear consequences if it continues</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="4">
                <h3>
                    <span class="question-number">4</span>
                    <span class="question-text">During a heated board discussion, how do you communicate when stakeholders have conflicting priorities and emotions are running high?</span>
                </h3>
                <div class="scenario-context">
                    [POSITIVE INTENT COMMUNICATOR] Board members are strongly divided on a critical decision, with personal agendas and frustrations affecting the dialogue
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(4, 5, this)">
                        <div class="answer-text">Acknowledge all perspectives, reframe the discussion around shared values and common goals, and facilitate solution-focused dialogue</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(4, 4, this)">
                        <div class="answer-text">Pause the emotional reactions, summarize each viewpoint with respect, and guide the conversation toward collaborative problem-solving</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(4, 3, this)">
                        <div class="answer-text">Present factual information clearly and suggest taking time to consider all options before making the decision</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(4, 2, this)">
                        <div class="answer-text">Make the decision based on your executive judgment and communicate the rationale to bring closure to the discussion</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="5">
                <h3>
                    <span class="question-number">5</span>
                    <span class="question-text">When someone disagrees with your idea in a meeting, how do you typically respond?</span>
                </h3>
                <div class="scenario-context">
                    A colleague openly challenges your proposed solution
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(5, 5, this)">
                        <div class="answer-text">I express interest and ask them to tell me more about their thinking</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(5, 4, this)">
                        <div class="answer-text">I ask them to elaborate so I can understand their concerns</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(5, 3, this)">
                        <div class="answer-text">I explain my reasoning and then ask to hear theirs</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(5, 2, this)">
                        <div class="answer-text">I explain my reasoning and why I believe my approach is best</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="6">
                <h3>
                    <span class="question-number">6</span>
                    <span class="question-text">When a team member is struggling with their workload, what do you typically do?</span>
                </h3>
                <div class="scenario-context">
                    Someone mentions feeling overwhelmed with their current projects
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(6, 5, this)">
                        <div class="answer-text">I ask what specific support they need and how I can help</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(6, 4, this)">
                        <div class="answer-text">I suggest reviewing their priorities to see what we can adjust</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(6, 3, this)">
                        <div class="answer-text">I let them know they can ask for help with prioritizing or delegating</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(6, 2, this)">
                        <div class="answer-text">I suggest time management strategies and prioritization techniques</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="7">
                <h3>
                    <span class="question-number">7</span>
                    <span class="question-text">When you notice tension between two team members, what's your approach?</span>
                </h3>
                <div class="scenario-context">
                    Two colleagues are avoiding each other and communication has become strained
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(7, 5, this)">
                        <div class="answer-text">I speak with each person privately to understand both perspectives</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(7, 4, this)">
                        <div class="answer-text">I bring them together for a facilitated conversation</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(7, 3, this)">
                        <div class="answer-text">I watch to see if it affects work before intervening</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(7, 2, this)">
                        <div class="answer-text">I address it directly and establish ground rules for professional behavior</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="8">
                <h3>
                    <span class="question-number">8</span>
                    <span class="question-text">Your organization faces a potential PR crisis that could damage reputation and stock price. How do you lead the response?</span>
                </h3>
                <div class="scenario-context">
                    A product issue, leadership scandal, or operational failure has emerged that threatens brand reputation and stakeholder confidence
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(8, 5, this)">
                        <div class="answer-text">Immediately convene crisis team, assess facts transparently, and develop authentic communication strategy with stakeholder-specific messaging</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(8, 4, this)">
                        <div class="answer-text">Take personal accountability, outline corrective actions, and proactively communicate with media and key stakeholders</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(8, 3, this)">
                        <div class="answer-text">Focus on internal damage control while carefully crafting external communication through legal and PR teams</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(8, 2, this)">
                        <div class="answer-text">Minimize public statements and let the legal team handle all external communications until the situation stabilizes</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="9">
                <h3>
                    <span class="question-number">9</span>
                    <span class="question-text">When you realize you made an error in judgment, what's your typical response?</span>
                </h3>
                <div class="scenario-context">
                    You discover that a decision you made last week wasn't the best choice
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(9, 5, this)">
                        <div class="answer-text">I address it directly with the team and explain what I learned</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(9, 4, this)">
                        <div class="answer-text">I acknowledge the mistake and involve others in finding a better solution</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(9, 3, this)">
                        <div class="answer-text">I quietly adjust course and implement the better approach</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(9, 2, this)">
                        <div class="answer-text">I focus on fixing the issue without drawing unnecessary attention</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="10">
                <h3>
                    <span class="question-number">10</span>
                    <span class="question-text">When team members come to you with concerns about workload or stress, how do you help them reframe their mindset?</span>
                </h3>
                <div class="scenario-context">
                    Several team members are feeling overwhelmed and losing confidence
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(10, 5, this)">
                        <div class="answer-text">I help them see challenges as growth opportunities and celebrate their progress</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(10, 4, this)">
                        <div class="answer-text">I remind them of past successes and build their confidence in their abilities</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(10, 3, this)">
                        <div class="answer-text">I acknowledge their feelings and help them focus on solutions</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(10, 2, this)">
                        <div class="answer-text">I tell them this is normal and they need to push through it</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="11">
                <h3>
                    <span class="question-number">11</span>
                    <span class="question-text">When someone challenges your decision in a meeting, what's your typical response?</span>
                </h3>
                <div class="scenario-context">
                    A team member openly questions a choice you made
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(11, 5, this)">
                        <div class="answer-text">I welcome their perspective and explore their concerns</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(11, 4, this)">
                        <div class="answer-text">I ask them to explain their thinking and consider alternatives</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(11, 3, this)">
                        <div class="answer-text">I explain my reasoning and remain open to discussion</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(11, 2, this)">
                        <div class="answer-text">I stand by my decision and explain why it's the right choice</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="12">
                <h3>
                    <span class="question-number">12</span>
                    <span class="question-text">When communicating bad news to your team, how do you typically approach it?</span>
                </h3>
                <div class="scenario-context">
                    You need to tell the team about budget cuts that will affect their projects
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(12, 5, this)">
                        <div class="answer-text">I present the facts clearly and invite questions and concerns</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(12, 4, this)">
                        <div class="answer-text">I explain the situation and work with them on solutions</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(12, 3, this)">
                        <div class="answer-text">I deliver the message directly and focus on moving forward</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(12, 2, this)">
                        <div class="answer-text">I present the decision and outline the next steps</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="13">
                <h3>
                    <span class="question-number">13</span>
                    <span class="question-text">When someone asks for career advice, what's your typical approach?</span>
                </h3>
                <div class="scenario-context">
                    A team member wants guidance on their professional development
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(13, 5, this)">
                        <div class="answer-text">I ask about their goals and help them explore their own path</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(13, 4, this)">
                        <div class="answer-text">I help them identify their strengths and development areas</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(13, 3, this)">
                        <div class="answer-text">I share resources and connections that might help them</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(13, 2, this)">
                        <div class="answer-text">I share my experience and suggest specific steps they could take</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="14">
                <h3>
                    <span class="question-number">14</span>
                    <span class="question-text">When you don't know the answer to someone's question, what's your typical response?</span>
                </h3>
                <div class="scenario-context">
                    Someone asks you something you're not sure about
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(14, 5, this)">
                        <div class="answer-text">I admit I don't know and suggest we figure it out together</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(14, 4, this)">
                        <div class="answer-text">I tell them I'll find out and get back to them with a good answer</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(14, 3, this)">
                        <div class="answer-text">I offer what I do know and suggest where they might find more</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(14, 2, this)">
                        <div class="answer-text">I connect them with someone who would know better</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="15">
                <h3>
                    <span class="question-number">15</span>
                    <span class="question-text">When training someone new, what's your typical approach?</span>
                </h3>
                <div class="scenario-context">
                    A new team member needs to learn a complex process
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(15, 5, this)">
                        <div class="answer-text">I guide them through it step by step, letting them do the work</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(15, 4, this)">
                        <div class="answer-text">I show them once, then watch as they try it themselves</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(15, 3, this)">
                        <div class="answer-text">I demonstrate the process and provide detailed documentation</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(15, 2, this)">
                        <div class="answer-text">I explain the key points and let them practice on their own</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="16">
                <h3>
                    <span class="question-number">16</span>
                    <span class="question-text">When someone is struggling with a skill they need to develop, how do you typically help?</span>
                </h3>
                <div class="scenario-context">
                    A team member is having difficulty with presentation skills
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(16, 5, this)">
                        <div class="answer-text">I offer to practice with them and provide constructive feedback</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(16, 4, this)">
                        <div class="answer-text">I help them break down what they want to improve and create a plan</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(16, 3, this)">
                        <div class="answer-text">I recommend training resources and check in on their progress</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(16, 2, this)">
                        <div class="answer-text">I share tips that have worked for me in similar situations</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="17">
                <h3>
                    <span class="question-number">17</span>
                    <span class="question-text">When you see someone with potential who isn't being recognized, what's your typical response?</span>
                </h3>
                <div class="scenario-context">
                    You notice a talented person whose contributions are being overlooked
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(17, 5, this)">
                        <div class="answer-text">I look for opportunities to showcase their work to others</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(17, 4, this)">
                        <div class="answer-text">I speak with them about their goals and how to increase visibility</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(17, 3, this)">
                        <div class="answer-text">I mention their contributions in appropriate settings</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(17, 2, this)">
                        <div class="answer-text">I encourage them to speak up more about their achievements</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="18">
                <h3>
                    <span class="question-number">18</span>
                    <span class="question-text">When following up on commitments, what's your typical approach?</span>
                </h3>
                <div class="scenario-context">
                    Someone said they'd have something done by today, but you haven't heard from them
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(18, 5, this)">
                        <div class="answer-text">I check in to see how things are going and if they need support</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(18, 4, this)">
                        <div class="answer-text">I ask about the status and if there are any obstacles</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(18, 3, this)">
                        <div class="answer-text">I send a friendly reminder about the deadline</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(18, 2, this)">
                        <div class="answer-text">I ask for a status update and new timeline if needed</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="19">
                <h3>
                    <span class="question-number">19</span>
                    <span class="question-text">When recognizing team achievements, what's your typical approach?</span>
                </h3>
                <div class="scenario-context">
                    Your team just delivered an important project successfully
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(19, 5, this)">
                        <div class="answer-text">I highlight specific contributions and celebrate individual strengths</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(19, 4, this)">
                        <div class="answer-text">I acknowledge both individual efforts and team collaboration</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(19, 3, this)">
                        <div class="answer-text">I celebrate the team's collective achievement and shared success</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(19, 2, this)">
                        <div class="answer-text">I focus on the results achieved and lessons learned</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="20">
                <h3>
                    <span class="question-number">20</span>
                    <span class="question-text">When your team faces a significant setback, what's your first instinct?</span>
                </h3>
                <div class="scenario-context">
                    A major project has failed to meet its deadline despite everyone's best efforts
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(20, 5, this)">
                        <div class="answer-text">I focus on what we learned and how this makes us stronger for next time</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(20, 4, this)">
                        <div class="answer-text">I look for the silver lining and help the team see new opportunities</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(20, 3, this)">
                        <div class="answer-text">I acknowledge the disappointment but keep us focused on moving forward</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(20, 2, this)">
                        <div class="answer-text">I feel frustrated and worry about how this affects our team's reputation</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="21">
                <h3>
                    <span class="question-number">21</span>
                    <span class="question-text">When you're feeling overwhelmed by multiple priorities, how do you typically reframe the situation?</span>
                </h3>
                <div class="scenario-context">
                    Everything feels urgent and you're not sure how you'll get it all done
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(21, 5, this)">
                        <div class="answer-text">I see it as an opportunity to practice prioritization and build resilience</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(21, 4, this)">
                        <div class="answer-text">I remind myself that I've handled tough situations before and can do it again</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(21, 3, this)">
                        <div class="answer-text">I focus on what I can control and take things one step at a time</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(21, 2, this)">
                        <div class="answer-text">I feel stressed and worry that I'm letting people down</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="22">
                <h3>
                    <span class="question-number">22</span>
                    <span class="question-text">When unexpected problems arise during important projects, what's your first mental reaction?</span>
                </h3>
                <div class="scenario-context">
                    Things are not going according to plan and stakeholders are asking questions
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(22, 5, this)">
                        <div class="answer-text">I see it as a challenge that will make us stronger and smarter</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(22, 4, this)">
                        <div class="answer-text">I focus on the solutions and opportunities this might create</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(22, 3, this)">
                        <div class="answer-text">I acknowledge the problem but stay focused on what we can control</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(22, 2, this)">
                        <div class="answer-text">I feel frustrated and worry about how this reflects on my leadership</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="23">
                <h3>
                    <span class="question-number">23</span>
                    <span class="question-text">When someone is facing a personal challenge that affects their work, how do you typically respond?</span>
                </h3>
                <div class="scenario-context">
                    A team member mentions they're dealing with a difficult family situation
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(23, 5, this)">
                        <div class="answer-text">I ask how I can support them and what flexibility they might need</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(23, 4, this)">
                        <div class="answer-text">I express concern and offer to adjust their workload temporarily</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(23, 3, this)">
                        <div class="answer-text">I acknowledge their situation and remind them of available resources</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(23, 2, this)">
                        <div class="answer-text">I thank them for letting me know and ask what adjustments we need to make</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="24">
                <h3>
                    <span class="question-number">24</span>
                    <span class="question-text">When facing tight deadlines with multiple competing priorities, what's your mindset?</span>
                </h3>
                <div class="scenario-context">
                    Everything seems urgent and there's not enough time to do it all perfectly
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(24, 5, this)">
                        <div class="answer-text">I focus on what we can accomplish and find creative ways to make it work</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(24, 4, this)">
                        <div class="answer-text">I prioritize ruthlessly and stay confident we'll deliver what matters most</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(24, 3, this)">
                        <div class="answer-text">I try to balance optimism with realistic expectations about what's possible</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(24, 2, this)">
                        <div class="answer-text">I worry about disappointing people and stress about what might go wrong</div>
                    </label>
                </div>
            </div>

            <div class="question" data-question="25">
                <h3>
                    <span class="question-number">25</span>
                    <span class="question-text">When facing a major organizational change, what's your first instinct?</span>
                </h3>
                <div class="scenario-context">
                    Your company announces a significant restructuring that will affect everyone
                </div>
                <div class="answers">
                    <label class="answer-option" onclick="selectAnswer(25, 5, this)">
                        <div class="answer-text">I focus on the opportunities this change could create for the team</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(25, 4, this)">
                        <div class="answer-text">I look for ways to help people adapt and find the positives</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(25, 3, this)">
                        <div class="answer-text">I prepare for both the challenges and potential benefits ahead</div>
                    </label>
                    <label class="answer-option" onclick="selectAnswer(25, 2, this)">
                        <div class="answer-text">I immediately think about what could go wrong and how to protect the team</div>
                    </label>
                </div>
            </div>

            <!-- 360-Degree Organizational Feedback Section -->
            <div class="organizational-feedback" id="organizationalFeedback" style="display: none;">
                <div class="section-header">
                    <h2>360° Organizational Feedback</h2>
                    <p class="section-subtitle">Share your perspective on team and organizational effectiveness</p>
                    <div class="progress-info">
                        <span id="orgProgressText">Organization Question <span id="orgCurrentQuestion">1</span> of 10</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="orgProgressFill" style="width: 10%;"></div>
                        </div>
                    </div>
                </div>

                <!-- Organizational Question 1: Team Collaboration -->
                <div data-org-question="1" style="display: block;">
                    <span class="question-text">How effectively does your team collaborate and share information across departments and levels?</span>
                    <div class="scenario-context">
                        [TEAM COLLABORATION] Consider cross-functional projects, information flow, and collective problem-solving within your organization
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(1, 5, this)">
                            <div class="answer-text">Information flows seamlessly, teams collaborate naturally, and silos are virtually non-existent</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(1, 4, this)">
                            <div class="answer-text">Good collaboration with occasional communication gaps that we actively work to address</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(1, 3, this)">
                            <div class="answer-text">Moderate collaboration with some departmental silos affecting information sharing</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(1, 2, this)">
                            <div class="answer-text">Limited collaboration with significant silos and poor information flow</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 2: Trust & Psychological Safety -->
                <div data-org-question="2" style="display: none;">
                    <span class="question-text">How safe do team members feel to voice concerns, share ideas, or admit mistakes?</span>
                    <div class="scenario-context">
                        [PSYCHOLOGICAL SAFETY] Consider whether people speak up, take risks, and feel supported when things go wrong
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(2, 5, this)">
                            <div class="answer-text">People openly share ideas and concerns, mistakes are learning opportunities, and everyone feels heard</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(2, 4, this)">
                            <div class="answer-text">Generally safe environment with most people comfortable speaking up</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(2, 3, this)">
                            <div class="answer-text">Mixed environment - some feel safe to speak up while others remain guarded</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(2, 2, this)">
                            <div class="answer-text">Fear-based culture where people avoid taking risks or admitting mistakes</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 3: Decision Making -->
                <div data-org-question="3" style="display: none;">
                    <span class="question-text">How effective and timely is decision-making at all levels of your organization?</span>
                    <div class="scenario-context">
                        [DECISION EFFECTIVENESS] Consider speed of decisions, quality of outcomes, and clarity of decision-making processes
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(3, 5, this)">
                            <div class="answer-text">Decisions are made quickly with clear processes, good input, and strong execution</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(3, 4, this)">
                            <div class="answer-text">Generally good decision-making with occasional delays or unclear processes</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(3, 3, this)">
                            <div class="answer-text">Inconsistent decision-making - sometimes fast and clear, sometimes slow and confusing</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(3, 2, this)">
                            <div class="answer-text">Slow, unclear decision-making that creates bottlenecks and confusion</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 4: Change Adaptability -->
                <div data-org-question="4" style="display: none;">
                    <span class="question-text">How well does your organization adapt to change and embrace innovation?</span>
                    <div class="scenario-context">
                        [CHANGE ADAPTABILITY] Consider response to market changes, new technologies, and internal transformations
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(4, 5, this)">
                            <div class="answer-text">We proactively embrace change, innovate continuously, and adapt quickly to new realities</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(4, 4, this)">
                            <div class="answer-text">Good at adapting to change with strong support systems for transitions</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(4, 3, this)">
                            <div class="answer-text">Mixed response to change - some areas adapt well while others struggle</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(4, 2, this)">
                            <div class="answer-text">Resistance to change is common and adaptation is slow and difficult</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 5: Performance Standards -->
                <div data-org-question="5" style="display: none;">
                    <span class="question-text">How clear are performance expectations and how consistently are high standards maintained?</span>
                    <div class="scenario-context">
                        [PERFORMANCE CULTURE] Consider clarity of goals, accountability systems, and consistency of expectations
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(5, 5, this)">
                            <div class="answer-text">Crystal clear expectations with consistent high standards and strong accountability</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(5, 4, this)">
                            <div class="answer-text">Generally clear expectations with good accountability systems</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(5, 3, this)">
                            <div class="answer-text">Somewhat clear expectations but inconsistent enforcement of standards</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(5, 2, this)">
                            <div class="answer-text">Unclear expectations with inconsistent standards and weak accountability</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 6: Learning & Development -->
                <div data-org-question="6" style="display: none;">
                    <span class="question-text">How committed is your organization to developing people and building capabilities?</span>
                    <div class="scenario-context">
                        [GROWTH CULTURE] Consider investment in training, mentoring, career development, and skill building
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(6, 5, this)">
                            <div class="answer-text">Strong commitment to development with excellent programs, mentoring, and growth opportunities</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(6, 4, this)">
                            <div class="answer-text">Good development opportunities with solid support for learning and growth</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(6, 3, this)">
                            <div class="answer-text">Some development opportunities but inconsistent or limited in scope</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(6, 2, this)">
                            <div class="answer-text">Limited development opportunities with little investment in people growth</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 7: Communication Effectiveness -->
                <div data-org-question="7" style="display: none;">
                    <span class="question-text">How effective is communication from leadership to all levels of the organization?</span>
                    <div class="scenario-context">
                        [COMMUNICATION FLOW] Consider transparency, frequency, clarity, and two-way communication channels
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(7, 5, this)">
                            <div class="answer-text">Excellent communication - transparent, regular, clear, and encouraging feedback from all levels</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(7, 4, this)">
                            <div class="answer-text">Good communication with occasional gaps but generally clear and transparent</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(7, 3, this)">
                            <div class="answer-text">Inconsistent communication - sometimes clear, sometimes confusing or missing</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(7, 2, this)">
                            <div class="answer-text">Poor communication with limited transparency and unclear messages</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 8: Resource Allocation -->
                <div data-org-question="8" style="display: none;">
                    <span class="question-text">How effectively are resources (time, budget, people) allocated to support strategic priorities?</span>
                    <div class="scenario-context">
                        [RESOURCE MANAGEMENT] Consider alignment between resources and priorities, efficiency, and strategic focus
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(8, 5, this)">
                            <div class="answer-text">Resources are strategically allocated with clear priorities and minimal waste</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(8, 4, this)">
                            <div class="answer-text">Generally good resource allocation with occasional misalignment</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(8, 3, this)">
                            <div class="answer-text">Mixed resource allocation - some strategic areas well-supported, others lacking</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(8, 2, this)">
                            <div class="answer-text">Poor resource allocation with significant waste and misalignment with priorities</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 9: Recognition & Appreciation -->
                <div data-org-question="9" style="display: none;">
                    <span class="question-text">How well does your organization recognize and appreciate good work and achievements?</span>
                    <div class="scenario-context">
                        [RECOGNITION CULTURE] Consider both formal and informal recognition, appreciation frequency, and value alignment
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(9, 5, this)">
                            <div class="answer-text">Excellent recognition culture with regular, meaningful appreciation at all levels</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(9, 4, this)">
                            <div class="answer-text">Good recognition with regular appreciation and acknowledgment of contributions</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(9, 3, this)">
                            <div class="answer-text">Inconsistent recognition - some good efforts but often people feel underappreciated</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(9, 2, this)">
                            <div class="answer-text">Poor recognition culture where good work often goes unnoticed or unappreciated</div>
                        </label>
                    </div>
                </div>

                <!-- Organizational Question 10: Strategic Clarity -->
                <div data-org-question="10" style="display: none;">
                    <span class="question-text">How clear and aligned is everyone on the organization's vision, strategy, and direction?</span>
                    <div class="scenario-context">
                        [STRATEGIC ALIGNMENT] Consider vision communication, strategy understanding, and directional clarity across all levels
                    </div>
                    <div class="answer-options">
                        <label class="answer-option" onclick="selectOrgAnswer(10, 5, this)">
                            <div class="answer-text">Everyone understands and is aligned on our vision, strategy, and how their work contributes</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(10, 4, this)">
                            <div class="answer-text">Good strategic clarity with most people understanding direction and their role</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(10, 3, this)">
                            <div class="answer-text">Some strategic clarity but confusion about priorities or how work connects to bigger picture</div>
                        </label>
                        <label class="answer-option" onclick="selectOrgAnswer(10, 2, this)">
                            <div class="answer-text">Limited strategic clarity with widespread confusion about direction and priorities</div>
                        </label>
                    </div>
                </div>

                <div class="question-navigation">
                    <button class="nav-button" id="orgPrevButton" onclick="previousOrgQuestion()" style="display: none;">
                        ← Previous
                    </button>
                    <button class="nav-button" id="orgNextButton" onclick="nextOrgQuestion()">
                        Next →
                    </button>
                    <button class="nav-button submit-button" id="orgCompleteButton" onclick="completeOrgFeedback()" style="display: none;">
                        Complete Assessment
                    </button>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results" id="results">
                <h2>Your Leadership Behavior Profile - Demo Results</h2>
                <div class="score-display">
                    <p style="font-size: 1.1rem; color: #3b82f6 !important; margin-bottom: 15px;">
                        This demo shows how your leadership behavioral tendencies are analyzed.
                    </p>
                    <p style="color: #3b82f6 !important;">
                        The full assessment includes 25 comprehensive questions across all four leadership dimensions.
                    </p>
                </div>
                <div class="framework-scores" id="frameworkScores">
                    <!-- Demo scores will be populated here -->
                </div>
                
                <!-- Response Summary Section -->
                <div class="response-summary">
                    <h3>Your Response Summary (Demo)</h3>
                    <p style="color: #3b82f6 !important; margin-bottom: 20px; font-size: 0.95rem;">
                        Here's a summary of how you responded in each leadership dimension:
                    </p>
                    <div id="responseSummary">
                        <!-- Response summaries will be populated here -->
                    </div>
                </div>

                <!-- Leadership Insights Section -->
                <div class="response-summary">
                    <h3>Your Leadership Profile Analysis</h3>
                    <p style="color: #3b82f6 !important; margin-bottom: 20px; font-size: 0.95rem;">
                        Based on your behavioral choices, here's what your responses reveal about your leadership approach:
                    </p>
                    <div id="leadershipInsights">
                        <!-- Leadership insights will be populated here -->
                    </div>
                </div>

                <!-- Strengths & Development Areas -->
                <div class="response-summary">
                    <h3>Strengths & Development Opportunities</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                        <div>
                            <h4 style="color: #059669; margin-bottom: 12px; font-size: 1.1rem;">🎯 Your Leadership Strengths</h4>
                            <div id="leadershipStrengths" class="response-list support">
                                <!-- Strengths will be populated here -->
                            </div>
                        </div>
                        <div>
                            <h4 style="color: #dc2626; margin-bottom: 12px; font-size: 1.1rem;">⚡ Growth Opportunities</h4>
                            <div id="growthOpportunities" class="response-list responsible">
                                <!-- Growth opportunities will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Development Recommendations Section -->
                <div class="response-summary">
                    <h3>Personalized Development Plan</h3>
                    <p style="color: #3b82f6 !important; margin-bottom: 20px; font-size: 0.95rem;">
                        Specific actions you can take immediately to enhance your leadership effectiveness:
                    </p>
                    <div id="developmentRecommendations">
                        <!-- Development recommendations will be populated here -->
                    </div>
                </div>

                <!-- Organizational Feedback Results Section -->
                <div class="organizational-results" id="organizationalResults" style="display: none;">
                    <h3>360° Organizational Health Assessment</h3>
                    <p style="color: #3b82f6 !important; margin-bottom: 20px; font-size: 0.95rem;">
                        Your perspective on organizational effectiveness and team performance across 10 key dimensions:
                    </p>
                    
                    <!-- Organizational Health Radar Chart Placeholder -->
                    <div style="background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%); padding: 25px; border-radius: 12px; margin-bottom: 25px; border: 1px solid #e1f5fe;">
                        <h4 style="color: #1e3a8a; margin-bottom: 15px; text-align: center;">Organizational Health Radar</h4>
                        <div id="organizationalRadar" style="text-align: center; padding: 20px; color: #64748b;">
                            <!-- Radar chart visualization will be populated here -->
                        </div>
                    </div>

                    <!-- Organizational Scores Grid -->
                    <div class="organizational-scores" id="organizationalScores">
                        <!-- Organizational framework scores will be populated here -->
                    </div>
                    
                    <!-- Top Organizational Strengths & Challenges -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 25px;">
                        <div>
                            <h4 style="color: #059669; margin-bottom: 12px; font-size: 1.1rem;">🏆 Organizational Strengths</h4>
                            <div id="orgStrengths" class="response-list support">
                                <!-- Top organizational strengths will be populated here -->
                            </div>
                        </div>
                        <div>
                            <h4 style="color: #dc2626; margin-bottom: 12px; font-size: 1.1rem;">🎯 Improvement Opportunities</h4>
                            <div id="orgChallenges" class="response-list responsible">
                                <!-- Organizational challenges will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Organizational Development Recommendations -->
                    <div style="margin-top: 25px;">
                        <h4 style="color: #1e3a8a; margin-bottom: 15px; font-size: 1.1rem;">🚀 Recommended Organizational Improvements</h4>
                        <div id="orgRecommendations" style="background: #f0f9ff; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6;">
                            <!-- Organizational improvement recommendations will be populated here -->
                        </div>
                    </div>

                    <!-- Team vs Individual Leadership Comparison -->
                    <div style="margin-top: 25px; background: #fffbeb; padding: 20px; border-radius: 12px; border-left: 4px solid #fbbf24;">
                        <h4 style="color: #92400e; margin-bottom: 15px; font-size: 1.1rem;">💡 Leadership Impact Insights</h4>
                        <div id="leadershipImpactComparison">
                            <!-- Comparison between individual leadership strengths and organizational needs will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Demo CTA -->
                <div class="demo-cta">
                    <h3>Ready to Transform Your Leadership Impact?</h3>
                    <p>
                        You've just completed the comprehensive Positive Effect Leaders Assessment with 360° Organizational Feedback - combining 25 individual leadership questions across 6 key dimensions with 10 organizational effectiveness questions. This gives you both personal leadership insights and organizational context.
                    </p>
                    <p style="margin-top: 15px; font-weight: 600;">
                        Want to create a personalized leadership development plan that addresses both your individual growth and organizational impact?
                    </p>
                    <a href="https://calendly.com/aprilcoaching/askaprilcourses" class="cta-button" target="_blank">
                        Schedule Your Leadership Development Consultation
                    </a>
                </div>

                <div style="background: #f8fafc; padding: 25px; border-radius: 12px; margin-top: 30px; border-left: 4px solid #fbbf24;">
                    <h3 style="color: #1e3a8a; margin-bottom: 15px;">About This Assessment</h3>
                    <p style="color: #3b82f6 !important; line-height: 1.6;">
                        This comprehensive leadership assessment combines individual behavioral analysis with 360° organizational feedback. The individual assessment uses scenario-based questions to reveal your natural leadership tendencies across 6 key dimensions, while the organizational feedback component captures your perspective on team effectiveness, culture, and systemic performance factors. Together, these provide a complete picture of leadership effectiveness in context.
                    </p>
                </div>
            </div>

            <!-- Navigation -->
            <div class="navigation">
                <button class="nav-btn" id="prevBtn" onclick="previousQuestion()" disabled>Previous</button>
                <div class="progress-indicator">
                    Question <span class="current" id="currentQ">1</span> of <span id="totalQ">25</span>
                </div>
                <button class="nav-btn" id="nextBtn" onclick="nextQuestion()" disabled>Next</button>
            </div>
        </div>

        <!-- Executive Team Dashboard -->
        <div class="executive-dashboard" id="executiveDashboard" style="display: none;">
            <div class="container" style="margin-top: 40px;">
                <div class="header">
                    <h1>Executive Team Leadership Assessment</h1>
                    <p class="subtitle">Comprehensive analysis of your senior leadership team's collective strengths and development opportunities</p>
                </div>
                
                <div style="padding: 40px;">
                    <!-- Team Overview Section -->
                    <div class="team-overview" style="margin-bottom: 40px;">
                        <h2 style="color: #1e3a8a; margin-bottom: 25px; font-size: 2rem;">Team Leadership Profile</h2>
                        
                        <!-- Team Heat Map -->
                        <div class="team-heatmap" style="background: #ffffff; padding: 30px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);">
                            <h3 style="color: #1e3a8a; margin-bottom: 20px;">Leadership Competency Heat Map</h3>
                            <div class="heatmap-container" id="teamHeatmap">
                                <!-- Heat map will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Team Statistics -->
                        <div class="team-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                            <div class="stat-card" style="background: linear-gradient(135deg, #fffbeb, #fef3c7); padding: 25px; border-radius: 15px; border-left: 4px solid #fbbf24;">
                                <h4 style="color: #1e3a8a; margin-bottom: 10px;">Team Average Score</h4>
                                <div class="stat-value" id="teamAverageScore" style="font-size: 2rem; font-weight: bold; color: #1e3a8a;">--</div>
                                <p style="color: #1e3a8a; font-size: 0.9rem; margin: 0;">Across all 6 leadership dimensions</p>
                            </div>
                            <div class="stat-card" style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); padding: 25px; border-radius: 15px; border-left: 4px solid #22c55e;">
                                <h4 style="color: #1e3a8a; margin-bottom: 10px;">Strongest Dimension</h4>
                                <div class="stat-value" id="strongestDimension" style="font-size: 1.2rem; font-weight: bold; color: #1e3a8a;">--</div>
                                <p style="color: #1e3a8a; font-size: 0.9rem; margin: 0;">Team's collective strength</p>
                            </div>
                            <div class="stat-card" style="background: linear-gradient(135deg, #fef2f2, #fee2e2); padding: 25px; border-radius: 15px; border-left: 4px solid #ef4444;">
                                <h4 style="color: #1e3a8a; margin-bottom: 10px;">Development Priority</h4>
                                <div class="stat-value" id="developmentPriority" style="font-size: 1.2rem; font-weight: bold; color: #1e3a8a;">--</div>
                                <p style="color: #1e3a8a; font-size: 0.9rem; margin: 0;">Primary focus area for team growth</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Individual Executive Profiles -->
                    <div class="executive-profiles" style="margin-bottom: 40px;">
                        <h2 style="color: #1e3a8a; margin-bottom: 25px; font-size: 2rem;">Individual Executive Profiles</h2>
                        <div class="profiles-container" id="executiveProfiles">
                            <!-- Individual profiles will be populated here -->
                        </div>
                    </div>
                    
                    <!-- Team Development Recommendations -->
                    <div class="team-recommendations" style="margin-bottom: 40px;">
                        <h2 style="color: #1e3a8a; margin-bottom: 25px; font-size: 2rem;">Team Development Strategy</h2>
                        
                        <!-- Priority Development Areas -->
                        <div class="priority-areas" style="background: #ffffff; padding: 30px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);">
                            <h3 style="color: #1e3a8a; margin-bottom: 20px;">Priority Development Areas</h3>
                            <div id="teamPriorities">
                                <!-- Team priorities will be populated here -->
                            </div>
                        </div>
                        
                        <!-- Succession Planning -->
                        <div class="succession-planning" style="background: #ffffff; padding: 30px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);">
                            <h3 style="color: #1e3a8a; margin-bottom: 20px;">Succession Readiness Matrix</h3>
                            <div id="successionMatrix">
                                <!-- Succession matrix will be populated here -->
                            </div>
                        </div>
                        
                        <!-- Cultural Alignment -->
                        <div class="cultural-alignment" style="background: #ffffff; padding: 30px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);">
                            <h3 style="color: #1e3a8a; margin-bottom: 20px;">Team Dynamics & Cultural Alignment</h3>
                            <div id="culturalAlignment">
                                <!-- Cultural alignment analysis will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Executive Summary for Board -->
                    <div class="executive-summary" style="background: linear-gradient(135deg, #fffbeb, #fef3c7); padding: 40px; border-radius: 15px; border: 2px solid #fbbf24;">
                        <h2 style="color: #1e3a8a; margin-bottom: 25px; font-size: 2rem;">📊 Executive Summary for Board Review</h2>
                        <div id="boardSummary">
                            <!-- Executive summary will be populated here -->
                        </div>
                        
                        <!-- Download Report Button -->
                        <div style="text-align: center; margin-top: 30px;">
                            <button onclick="downloadExecutiveReport()" 
                                    style="background: linear-gradient(135deg, #1e3a8a, #1e40af); color: white; border: none; padding: 15px 40px; border-radius: 10px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(30, 58, 138, 0.3);">
                                📄 Download Executive Team Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: white; text-align: center; padding: 30px; margin-top: 40px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
            <!-- Coach/Consultant Contact Section -->
            <div style="background: rgba(255, 255, 255, 0.1); padding: 25px; border-radius: 15px; margin-bottom: 25px; border: 1px solid rgba(255, 255, 255, 0.15);">
                <h3 style="color: #fbbf24; font-size: 1.2rem; margin-bottom: 15px; font-weight: 600;">
                    Are you a coach or consultant?
                </h3>
                <p style="color: #ffffff !important; font-size: 1rem; margin-bottom: 20px; opacity: 0.9; line-height: 1.5;">
                    Want to use this assessment tool with your clients? Get in touch to learn about licensing and partnership opportunities.
                </p>
                <a href="mailto:april@aprilsabral.com" 
                   style="display: inline-block; background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #0f172a; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);">
                    ✉️ Contact Us
                </a>
            </div>
            
            <p style="font-size: 0.9rem; opacity: 0.8; margin: 0;">
                © 2024 April Sabral - Proprietary Leadership Assessment Tool
            </p>
        </div>
    </div>

    <script>
        // Personalization variables
        let currentPersonalizationQ = 1;
        let totalPersonalizationQ = 7;
        let personalizationData = {};
        let personalizationComplete = false;
        
        let currentQuestion = 1;
        let totalQuestions = 25; // Full demo version with all 25 questions
        let answers = {};
        let responseTexts = {}; // Store the actual response text for summary

        function selectAnswer(questionNum, value, element) {
            // Remove selection from other options in this question
            const questionDiv = document.querySelector(`[data-question="${questionNum}"]`);
            const allOptions = questionDiv.querySelectorAll('.answer-option');
            allOptions.forEach(option => option.classList.remove('selected'));
            
            // Select this option
            element.classList.add('selected');
            
            // Store answer value and response text - use the display text from the element
            answers[questionNum] = value;
            responseTexts[questionNum] = element.querySelector('.answer-text').textContent;
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
        }

        // Personalization functions
        function selectPersonalization(category, value, element) {
            // Remove selection from other options in this question
            const questionDiv = document.querySelector(`[data-personalization="${currentPersonalizationQ}"]`);
            const allOptions = questionDiv.querySelectorAll('.answer-option');
            allOptions.forEach(option => option.classList.remove('selected'));
            
            // Select this option
            element.classList.add('selected');
            
            // Store personalization data
            personalizationData[category] = value;
            
            // Enable next button
            const nextBtn = document.getElementById('nextPersonalizationBtn');
            if (nextBtn) {
                nextBtn.disabled = false;
                console.log('Next button enabled for personalization question', currentPersonalizationQ);
            } else {
                console.log('Next button not found!');
            }
        }

        function selectPersonalizationMultiple(category, value, element) {
            // Initialize array if it doesn't exist
            if (!personalizationData[category]) {
                personalizationData[category] = [];
            }
            
            // Toggle selection
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                // Remove from array
                const index = personalizationData[category].indexOf(value);
                if (index > -1) {
                    personalizationData[category].splice(index, 1);
                }
            } else {
                element.classList.add('selected');
                // Add to array
                personalizationData[category].push(value);
            }
            
            // Enable next button if at least one option is selected
            const questionDiv = document.querySelector(`[data-personalization="${currentPersonalizationQ}"]`);
            const selectedOptions = questionDiv.querySelectorAll('.answer-option.selected');
            document.getElementById('nextPersonalizationBtn').disabled = selectedOptions.length === 0;
        }

        function nextPersonalization() {
            if (currentPersonalizationQ < totalPersonalizationQ) {
                // Hide current question
                document.querySelector(`[data-personalization="${currentPersonalizationQ}"]`).classList.remove('active');
                
                // Show next question
                currentPersonalizationQ++;
                document.querySelector(`[data-personalization="${currentPersonalizationQ}"]`).classList.add('active');
                
                updatePersonalizationNavigation();
                updatePersonalizationProgress();
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                // Complete personalization and start main assessment
                completePersonalization();
            }
        }

        function previousPersonalization() {
            if (currentPersonalizationQ > 1) {
                // Hide current question
                document.querySelector(`[data-personalization="${currentPersonalizationQ}"]`).classList.remove('active');
                
                // Show previous question
                currentPersonalizationQ--;
                document.querySelector(`[data-personalization="${currentPersonalizationQ}"]`).classList.add('active');
                
                updatePersonalizationNavigation();
                updatePersonalizationProgress();
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function updatePersonalizationNavigation() {
            const prevBtn = document.getElementById('prevPersonalizationBtn');
            const nextBtn = document.getElementById('nextPersonalizationBtn');
            const currentQ = document.getElementById('currentPersonalizationQ');
            
            // Update question counter
            currentQ.textContent = currentPersonalizationQ;
            
            // Update button states
            prevBtn.disabled = currentPersonalizationQ === 1;
            
            // Check if current question is answered
            const currentQuestionDiv = document.querySelector(`[data-personalization="${currentPersonalizationQ}"]`);
            const selectedOptions = currentQuestionDiv.querySelectorAll('.answer-option.selected');
            nextBtn.disabled = selectedOptions.length === 0;
            
            // Update button text for last question
            if (currentPersonalizationQ === totalPersonalizationQ) {
                nextBtn.textContent = 'Start Assessment';
            } else {
                nextBtn.textContent = 'Next';
            }
        }

        function updatePersonalizationProgress() {
            const progressFill = document.getElementById('personalizationProgress');
            const percentage = (currentPersonalizationQ / totalPersonalizationQ) * 100;
            progressFill.style.width = percentage + '%';
        }

        function completePersonalization() {
            console.log('completePersonalization called');
            personalizationComplete = true;
            
            // Hide personalization content
            const personalizationContent = document.getElementById('personalizationContent');
            const assessmentContent = document.getElementById('assessmentContent');
            
            console.log('Elements found:', {
                personalizationContent: !!personalizationContent,
                assessmentContent: !!assessmentContent
            });
            
            if (personalizationContent) personalizationContent.style.display = 'none';
            
            // Show main assessment
            if (assessmentContent) assessmentContent.style.display = 'block';
            
            // Add assessment mode styling
            const container = document.querySelector('.container');
            if (container) {
                container.classList.add('assessment-mode');
                console.log('Assessment mode class added');
            }
            
            // Update banner
            const banner = document.querySelector('.demo-banner');
            if (banner) banner.innerHTML = '🎯 LEADERSHIP ASSESSMENT - Question 1 of 25';
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            console.log('Personalization completed, assessment should now be visible');
        }

        function nextQuestion() {
            if (currentQuestion < totalQuestions) {
                // Hide current question
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('active');
                
                // Show next question
                currentQuestion++;
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('active');
                
                updateNavigation();
                updateProgress();
                
                // Scroll to top on mobile
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                // Show results
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 1) {
                // Hide current question
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('active');
                
                // Show previous question
                currentQuestion--;
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('active');
                
                updateNavigation();
                updateProgress();
                
                // Scroll to top on mobile
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function updateNavigation() {
            // Update progress indicator
            document.getElementById('currentQ').textContent = currentQuestion;
            
            // Update button states
            document.getElementById('prevBtn').disabled = (currentQuestion === 1);
            
            // Check if current question is answered
            const currentAnswer = answers[currentQuestion];
            document.getElementById('nextBtn').disabled = !currentAnswer;
            
            // Change to "Complete" on last question
            if (currentQuestion === totalQuestions) {
                document.getElementById('nextBtn').textContent = 'Complete Assessment';
            } else {
                document.getElementById('nextBtn').textContent = 'Next';
            }
        }

        function updateProgress() {
            const progress = (currentQuestion / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showResults() {
            // Hide all questions and navigation
            document.querySelectorAll('.question').forEach(q => q.style.display = 'none');
            document.querySelector('.navigation').style.display = 'none';
            document.querySelector('.progress-bar').style.display = 'none';
            
            // Scroll to top for results view
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Calculate demo scores
            const scores = calculateDemoScores();
            
            // Show results
            const resultsDiv = document.getElementById('results');
            resultsDiv.classList.add('active');
            
            // Display framework scores and comprehensive analysis
            displayFrameworkScores(scores);
            displayResponseSummary();
            displayLeadershipInsights(scores);
            displayStrengthsAndOpportunities(scores);
            displayDevelopmentRecommendations(scores);
            
            // Add PDF download button
            addPDFDownloadButton(scores);
            
            // Automatically transition to organizational feedback after showing individual results
            setTimeout(() => {
                // Hide individual results
                document.getElementById('results').style.display = 'none';
                
                // Show organizational feedback section
                document.getElementById('organizationalFeedback').style.display = 'block';
                
                // Scroll to organizational feedback
                document.getElementById('organizationalFeedback').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                
                // Add transition message
                const orgSection = document.getElementById('organizationalFeedback');
                const transitionMessage = document.createElement('div');
                transitionMessage.style.cssText = 'background: #fbbf24; color: #92400e; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: 600;';
                transitionMessage.innerHTML = '🎯 Now let\'s get your perspective on organizational effectiveness and team performance';
                orgSection.insertBefore(transitionMessage, orgSection.firstChild.nextSibling);
                
                // Remove the message after 3 seconds
                setTimeout(() => {
                    if (transitionMessage.parentNode) {
                        transitionMessage.remove();
                    }
                }, 3000);
            }, 3000); // 3 second delay to let user see their individual results
        }

        function calculateDemoScores() {
            const scores = {
                performance: 0,
                relationship: 0,
                communication: 0,
                coaching: 0,
                ownership: 0,
                mindset: 0
            };

            // Updated question mapping to new Positive Effect Leaders framework with enhanced mindset focus
            const questionMapping = {
                1: 'relationship', 2: 'relationship', 3: 'relationship', 4: 'communication', 5: 'communication',
                6: 'relationship', 7: 'relationship', 8: 'ownership', 9: 'performance', 10: 'mindset',
                11: 'communication', 12: 'communication', 13: 'coaching', 14: 'coaching', 15: 'coaching',
                16: 'coaching', 17: 'coaching', 18: 'ownership', 19: 'performance', 20: 'mindset',
                21: 'mindset', 22: 'mindset', 23: 'performance', 24: 'mindset', 25: 'mindset'
            };

            // Calculate raw scores
            Object.keys(answers).forEach(questionNum => {
                const framework = questionMapping[questionNum];
                const score = answers[questionNum];
                
                if (framework && scores.hasOwnProperty(framework)) {
                    scores[framework] += score;
                }
            });

            // Convert to percentages - distribute questions with enhanced mindset focus
            const questionCounts = { 
                performance: 3, 
                relationship: 5, 
                communication: 4, 
                coaching: 5, 
                ownership: 2, 
                mindset: 6 
            };
            Object.keys(scores).forEach(framework => {
                const maxPossible = questionCounts[framework] * 5;
                scores[framework] = Math.round((scores[framework] / maxPossible) * 100);
            });

            return scores;
        }

        function displayFrameworkScores(scores) {
            const scoresContainer = document.getElementById('frameworkScores');
            scoresContainer.innerHTML = '';

            const frameworks = [
                { key: 'performance', name: 'PERFORMANCE & GROWTH MANAGER', class: 'performance', desc: 'Aligns goals to KPIs, runs performance conversations' },
                { key: 'relationship', name: 'RELATIONSHIP BUILDER', class: 'relationship', desc: 'Creates psychological safety and belonging' },
                { key: 'communication', name: 'POSITIVE-INTENT COMMUNICATOR', class: 'communication', desc: 'Deepens connection skills with empathy' },
                { key: 'coaching', name: 'COACH & PEOPLE DEVELOPER', class: 'coaching', desc: 'Listens to learn, asks profound questions' },
                { key: 'ownership', name: 'OWNERSHIP & ACCOUNTABILITY DRIVER', class: 'ownership', desc: 'Sets crystal-clear expectations and standards' },
                { key: 'mindset', name: 'MINDSET & ENERGY STEWARD', class: 'mindset', desc: 'Models calm under pressure, manages energy' }
            ];

            frameworks.forEach(framework => {
                const scoreDiv = document.createElement('div');
                scoreDiv.className = `framework-score ${framework.class}`;
                scoreDiv.innerHTML = `
                    <h3>${framework.name}</h3>
                    <div class="score-value">${scores[framework.key] || 0}%</div>
                    <div class="score-description">${framework.desc}</div>
                `;
                scoresContainer.appendChild(scoreDiv);
            });
        }

        function displayResponseSummary() {
            const summaryContainer = document.getElementById('responseSummary');
            
            // Updated question mapping to new framework
            const questionMapping = {
                1: 'relationship', 2: 'relationship', 3: 'relationship', 4: 'communication', 5: 'communication',
                6: 'relationship', 7: 'relationship', 8: 'ownership', 9: 'ownership', 10: 'performance',
                11: 'communication', 12: 'communication', 13: 'coaching', 14: 'coaching', 15: 'coaching',
                16: 'coaching', 17: 'coaching', 18: 'ownership', 19: 'ownership', 20: 'performance',
                21: 'performance', 22: 'mindset', 23: 'relationship', 24: 'mindset', 25: 'mindset'
            };

            // Group responses by framework
            const responsesByFramework = {
                performance: [],
                relationship: [],
                communication: [],
                coaching: [],
                ownership: [],
                mindset: []
            };

            Object.keys(responseTexts).forEach(questionNum => {
                const framework = questionMapping[questionNum];
                if (framework && responsesByFramework[framework]) {
                    responsesByFramework[framework].push(responseTexts[questionNum]);
                }
            });

            // Display responses for each framework that has responses
            const frameworkNames = {
                performance: 'PERFORMANCE & GROWTH MANAGER',
                relationship: 'RELATIONSHIP BUILDER',
                communication: 'POSITIVE-INTENT COMMUNICATOR',
                coaching: 'COACH & PEOPLE DEVELOPER',
                ownership: 'OWNERSHIP & ACCOUNTABILITY DRIVER',
                mindset: 'MINDSET & ENERGY STEWARD'
            };

            Object.keys(responsesByFramework).forEach(framework => {
                if (responsesByFramework[framework].length > 0) {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'response-category';
                    
                    const title = document.createElement('h4');
                    title.textContent = frameworkNames[framework];
                    categoryDiv.appendChild(title);
                    
                    const responseList = document.createElement('div');
                    responseList.className = `response-list ${framework}`;
                    
                    responsesByFramework[framework].forEach(response => {
                        const responseItem = document.createElement('div');
                        responseItem.className = 'response-item';
                        responseItem.textContent = `• ${response}`;
                        responseList.appendChild(responseItem);
                    });
                    
                    categoryDiv.appendChild(responseList);
                    summaryContainer.appendChild(categoryDiv);
                }
            });
        }

        function displayLeadershipInsights(scores) {
            const insightsContainer = document.getElementById('leadershipInsights');
            
            // Analyze the leadership profile based on scores
            const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const dominant = sortedScores[0][0];
            const secondary = sortedScores[1][0];
            
            const insights = {
                performance: {
                    high: "You excel as a Performance & Growth Manager, linking behavior to outcomes and building development plans. Your team knows how their work connects to bigger goals.",
                    moderate: "You balance performance management with other leadership priorities, addressing development when needed."
                },
                relationship: {
                    high: "You're a natural Relationship Builder who creates psychological safety and deep connections. Your team feels safe to take risks and share ideas.",
                    moderate: "You build relationships while balancing other demands, creating connection when situations require it."
                },
                connecting: {
                    high: "You're a master Connector who builds bridges and creates belonging. Your team feels deeply heard and valued in all interactions.",
                    moderate: "You connect with positive intent when possible, balancing directness with empathy based on the situation."
                },
                coaching: {
                    high: "You're a skilled Coach & People Developer who asks profound questions and unlocks thinking. Your team develops strong problem-solving capabilities.",
                    moderate: "You balance coaching with directing, knowing when to guide thinking and when to provide answers."
                },
                ownership: {
                    high: "You're an Ownership & Accountability Driver who sets crystal-clear expectations and follows through reliably. Your team knows exactly what's expected.",
                    moderate: "You drive ownership and accountability when needed, balancing clear expectations with flexibility."
                },
                mindset: {
                    high: "You're a Mindset & Energy Steward who stays calm under pressure and reframes setbacks as learning. Your team stays resilient and future-focused.",
                    moderate: "You manage mindset and energy reasonably well, staying relatively calm while working to maintain team morale."
                }
            };

            // Create insight based on dominant style
            const insight = insights[dominant]?.[scores[dominant] > 75 ? 'high' : 'moderate'] || 
                           "Your leadership style shows a balanced approach across multiple dimensions.";
            
            const insightDiv = document.createElement('div');
            insightDiv.className = 'response-item';
            insightDiv.innerHTML = `
                <div style="background: #f0f9ff; padding: 20px; border-radius: 10px; border-left: 4px solid #0284c7;">
                    <h4 style="color: #0284c7; margin-bottom: 10px;">Your Leadership Signature</h4>
                    <p style="color: #3b82f6 !important; line-height: 1.6; margin: 0;">${insight}</p>
                </div>
            `;
            insightsContainer.appendChild(insightDiv);

            // Add behavioral pattern insight
            const mindsetScores = [22, 24, 25].map(q => answers[q]).filter(Boolean);
            const avgMindset = mindsetScores.length > 0 ? 
                mindsetScores.reduce((sum, score) => sum + score, 0) / mindsetScores.length : 3;

            const mindsetInsight = avgMindset >= 4 ? 
                "You demonstrate a growth mindset and optimistic approach to challenges, which helps your team stay resilient during difficult times." :
                "You may tend toward caution or worry in challenging situations, which can sometimes limit your team's willingness to take risks or innovate.";

            const mindsetDiv = document.createElement('div');
            mindsetDiv.className = 'response-item';
            mindsetDiv.innerHTML = `
                <div style="background: #f9fafb; padding: 20px; border-radius: 10px; border-left: 4px solid #3b82f6; margin-top: 15px;">
                    <h4 style="color: #3b82f6 !important; margin-bottom: 10px;">Your Mindset Pattern</h4>
                    <p style="color: #3b82f6 !important; line-height: 1.6; margin: 0;">${mindsetInsight}</p>
                </div>
            `;
            insightsContainer.appendChild(mindsetDiv);
        }

        function displayStrengthsAndOpportunities(scores) {
            const strengthsContainer = document.getElementById('leadershipStrengths');
            const opportunitiesContainer = document.getElementById('growthOpportunities');
            
            // Sort scores to identify strengths (top 2) and opportunities (bottom 2)
            const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const strengths = sortedScores.slice(0, 2);
            const opportunities = sortedScores.slice(-2).reverse();

            const strengthLeverage = {
                performance: [
                    "Mentor other leaders on goal-setting frameworks",
                    "Lead performance improvement initiatives",
                    "Share your KPI alignment strategies company-wide"
                ],
                relationship: [
                    "Facilitate cross-departmental collaboration projects", 
                    "Train others on psychological safety techniques",
                    "Lead team-building initiatives across the organization"
                ],
                communication: [
                    "Present at leadership meetings on positive communication",
                    "Mentor managers on empathy and connection skills",
                    "Lead difficult conversations as a neutral facilitator"
                ],
                coaching: [
                    "Become the go-to person for developing others",
                    "Lead coaching training sessions for other managers",
                    "Take on high-potential employees as mentees"
                ],
                ownership: [
                    "Design accountability systems for other teams",
                    "Lead projects requiring clear ownership structures",
                    "Train other leaders on delegation best practices"
                ],
                mindset: [
                    "Lead change management initiatives", 
                    "Mentor stressed team members through challenges",
                    "Model resilience during organizational transitions"
                ]
            };

            const quickWins = {
                performance: [
                    "Set 3 measurable goals this week",
                    "Schedule monthly 1:1s with each team member", 
                    "Create a simple performance tracking system"
                ],
                relationship: [
                    "Ask 'What haven't we considered?' in your next meeting",
                    "Grab coffee with someone from another department",
                    "Share a personal learning experience with your team"
                ],
                communication: [
                    "Use 'we' instead of 'you' when addressing team issues",
                    "Ask 'What are you trying to achieve?' before responding",
                    "Give one specific recognition this week"
                ],
                coaching: [
                    "Ask 'What do you think?' before giving your opinion",
                    "Give one stretch assignment to a team member",
                    "Practice the 5-step coaching model in your next 1:1"
                ],
                ownership: [
                    "Write out clear who/what/when for one major decision",
                    "Delegate one task with specific boundaries this week",
                    "Create one simple accountability check-in"
                ],
                mindset: [
                    "Take 3 deep breaths before your next stressful response",
                    "Reframe one setback as a learning opportunity",
                    "Start one meeting by discussing possibilities, not problems"
                ]
            };

            // Display strengths with leverage actions
            strengths.forEach(([framework, score]) => {
                if (score > 60) {
                    const strengthItem = document.createElement('div');
                    strengthItem.className = 'response-category';
                    strengthItem.innerHTML = `
                        <h4 style="color: #10b981; margin-bottom: 8px;">💪 ${framework.charAt(0).toUpperCase() + framework.slice(1)} Strength (${Math.round(score)}%)</h4>
                        <div style="margin-bottom: 10px; font-weight: 600;">Leverage this strength:</div>
                        ${strengthLeverage[framework].map(item => `<div class="response-item">• ${item}</div>`).join('')}
                    `;
                    strengthsContainer.appendChild(strengthItem);
                }
            });

            // Display opportunities with quick wins - ALWAYS show growth areas even for high performers
            opportunities.forEach(([framework, score]) => {
                if (score < 85) { // Changed from 75 to 85 - always show unless near perfect
                    const opportunityItem = document.createElement('div');
                    opportunityItem.className = 'response-category';
                    const title = score > 75 ? "Next Level Mastery" : "Growth Area";
                    const emoji = score > 75 ? "⭐" : "🎯";
                    opportunityItem.innerHTML = `
                        <h4 style="color: #f59e0b; margin-bottom: 8px;">${emoji} ${framework.charAt(0).toUpperCase() + framework.slice(1)} ${title} (${Math.round(score)}%)</h4>
                        <div style="margin-bottom: 10px; font-weight: 600;">Quick wins this week:</div>
                        ${quickWins[framework].map(item => `<div class="response-item">• ${item}</div>`).join('')}
                    `;
                    opportunitiesContainer.appendChild(opportunityItem);
                }
            });
        }

        function getPersonalizedContext() {
            if (!personalizationComplete || Object.keys(personalizationData).length === 0) {
                return '';
            }
            
            let context = '';
            
            // Add role context
            if (personalizationData.role) {
                const roleContexts = {
                    'aspiring': 'As an aspiring leader preparing for your first formal role',
                    'first-time': 'As a new leader (0-1 year) building your foundation',
                    'mid-level': 'As a mid-level manager leading teams and other managers',
                    'senior': 'As a senior leader overseeing multiple departments',
                    'executive': 'As an executive with organization-wide influence'
                };
                context += roleContexts[personalizationData.role] || '';
            }
            
            // Add impact scope
            if (personalizationData.impact) {
                const impactContexts = {
                    '0': ' with no direct reports yet',
                    '1-5': ' leading a small team of 1-5 people',
                    '6-15': ' managing 6-15 team members',
                    '16-50': ' overseeing a large team of 16-50 people',
                    '50+': ' leading an organization of 50+ people'
                };
                context += impactContexts[personalizationData.impact] || '';
            }
            
            // Add experience level
            if (personalizationData.experience) {
                const experienceContexts = {
                    'new': ' (with less than 1 year of leadership experience)',
                    'developing': ' (with 1-3 years of leadership experience)', 
                    'experienced': ' (with 3-7 years of leadership experience)',
                    'seasoned': ' (with 7+ years of leadership experience)'
                };
                context += experienceContexts[personalizationData.experience] || '';
            }
            
            return context + ', here are specific recommendations tailored to your situation:';
        }

        function getPersonalizedRecommendations(framework, baseRecommendations) {
            if (!personalizationComplete || Object.keys(personalizationData).length === 0) {
                return baseRecommendations;
            }
            
            const personalizedRecs = [...baseRecommendations];
            
            // Add role-specific recommendations
            const roleSpecificRecs = {
                'aspiring': {
                    performance: ['Volunteer to lead small projects to demonstrate leadership potential', 'Document your contributions to build a leadership portfolio'],
                    relationship: ['Build influence by becoming a go-to person for collaboration', 'Practice active listening in team meetings to demonstrate leadership qualities'],
                    communication: ['Practice presenting ideas confidently in meetings', 'Seek feedback on your communication style from trusted colleagues'],
                    coaching: ['Offer to mentor junior team members or new hires', 'Ask your manager for coaching opportunities within your current role'],
                    ownership: ['Take initiative on process improvements without being asked', 'Volunteer for cross-functional projects that demonstrate accountability'],
                    mindset: ['Develop a growth mindset about leadership challenges', 'Stay positive and solution-focused when discussing workplace issues']
                },
                'first-time': {
                    performance: ['Set clear expectations in your first 90 days with each direct report', 'Learn your company\\'s performance management systems and processes'],
                    relationship: ['Schedule one-on-ones with each team member to understand their motivations', 'Build relationships with peer managers for support and collaboration'],
                    communication: ['Practice difficult conversations with HR or your manager first', 'Develop your authentic leadership voice - don\\'t try to copy other leaders'],
                    coaching: ['Focus on asking questions rather than giving all the answers', 'Practice the skill of helping team members solve their own problems'],
                    ownership: ['Clarify decision-making authority with your own manager', 'Start with small delegation wins before giving larger responsibilities'],
                    mindset: ['Remind yourself that making mistakes is part of learning leadership', 'Build confidence by celebrating small wins with your team']
                }
            };
            
            if (personalizationData.role && roleSpecificRecs[personalizationData.role] && roleSpecificRecs[personalizationData.role][framework]) {
                personalizedRecs.unshift(...roleSpecificRecs[personalizationData.role][framework]);
            }
            
            // Add feedback-based recommendations
            if (personalizationData.feedback && personalizationData.feedback.includes('communication')) {
                if (framework === 'communication') {
                    personalizedRecs.unshift('Address the communication feedback you\\'ve received by practicing clear, concise messaging');
                }
            }
            
            // Add challenge-based recommendations
            const challengeRecs = {
                'credibility': {
                    relationship: ['Build credibility through consistent follow-through on commitments'],
                    performance: ['Demonstrate expertise by sharing insights and asking thoughtful questions']
                },
                'performance': {
                    coaching: ['Learn to have direct but supportive conversations about underperformance'],
                    ownership: ['Create clear performance expectations and accountability systems']
                }
            };
            
            if (personalizationData.challenge && challengeRecs[personalizationData.challenge] && challengeRecs[personalizationData.challenge][framework]) {
                personalizedRecs.unshift(...challengeRecs[personalizationData.challenge][framework]);
            }
            
            // Add mindset-specific recommendations based on their mental energy approach
            if (framework === 'mindset' && personalizationData.mindset) {
                const mindsetRecs = {
                    'struggle': ['Start with one small daily practice: 5-minute morning intention setting', 'Identify your stress triggers and create a response plan'],
                    'inconsistent': ['Track your energy patterns for a week to identify what drains vs. energizes you', 'Create 2-3 go-to strategies for low-energy days'],
                    'routines': ['Expand your current routines to include team energy management practices', 'Share what works for you with struggling team members'],
                    'natural': ['Leverage your natural optimism by helping others reframe challenges', 'Document your mindset practices to teach other leaders']
                };
                
                if (mindsetRecs[personalizationData.mindset]) {
                    personalizedRecs.unshift(...mindsetRecs[personalizationData.mindset]);
                }
            }
            
            return personalizedRecs.slice(0, 5); // Keep top 5 most relevant
        }

        function displayDevelopmentRecommendations(scores) {
            const recommendationsContainer = document.getElementById('developmentRecommendations');
            
            // Find the lowest scoring areas for development focus
            const sortedScores = Object.entries(scores).sort((a, b) => a[1] - b[1]);
            const lowestScore = sortedScores[0];
            const secondLowest = sortedScores[1];
            
            // Development recommendations based on new Positive Effect Leaders framework
            const recommendations = {
                performance: {
                    title: "Strengthen Performance & Growth Management",
                    items: [
                        "Connect individual goals more clearly to team and organizational KPIs",
                        "Schedule regular performance conversations that focus on growth, not just evaluation",
                        "Build development plans with clear succession pipelines for your team",
                        "Document agreements and track progress against measurable outcomes"
                    ]
                },
                relationship: {
                    title: "Enhance Relationship Building Skills",
                    items: [
                        "Create more psychological safety by asking 'What haven't we considered?' in meetings",
                        "Build cross-functional alliances by understanding other departments' challenges",
                        "Deepen connection skills through curiosity, empathy, and genuine recognition",
                        "Practice vulnerability - share your own learning experiences with the team"
                    ]
                },
                communication: {
                    title: "Develop Positive-Intent Communication",
                    items: [
                        "Assume positive intent in all interactions - ask 'What might they be trying to achieve?'",
                        "Create more belonging by using 'we' language instead of 'you' when addressing issues",
                        "Build empathy by reflecting back what you heard before responding",
                        "Strengthen recognition skills - be specific about what behaviors you want to see more of"
                    ]
                },
                coaching: {
                    title: "Enhance Coaching & People Development",
                    items: [
                        "Ask more profound questions that unlock thinking instead of giving answers",
                        "Use the 5-step coaching formula: Listen → Clarify → Explore → Plan → Commit",
                        "Provide more feed-forward and stretch assignments that celebrate growth",
                        "Focus on developing capabilities rather than just completing tasks"
                    ]
                },
                ownership: {
                    title: "Improve Ownership & Accountability Systems",
                    items: [
                        "Set crystal-clear expectations about who/what/when for all major decisions",
                        "Delegate with guardrails - give autonomy within defined boundaries",
                        "Build simple systems for accountability that team members can use reliably",
                        "Transfer ownership gradually rather than dumping responsibility all at once"
                    ]
                },
                mindset: {
                    title: "Develop Mindset & Energy Stewardship",
                    items: [
                        "Practice calm under pressure - take 3 deep breaths before responding to stress",
                        "Reframe setbacks as learning opportunities for the entire team",
                        "Keep teams future-focused by discussing possibilities rather than dwelling on problems",
                        "Manage your energy intentionally - model the energy you want to see"
                    ]
                }
            };

            // Add personalized context if available
            const personalizedContext = getPersonalizedContext();
            if (personalizedContext) {
                const contextDiv = document.createElement('div');
                contextDiv.style.cssText = 'background: linear-gradient(135deg, #fffbeb, #fef3c7); padding: 20px; border-radius: 12px; margin-bottom: 25px; border-left: 4px solid #fbbf24;';
                contextDiv.innerHTML = `<p style="color: #1e3a8a; font-size: 1rem; font-weight: 500; margin: 0;">${personalizedContext}</p>`;
                recommendationsContainer.appendChild(contextDiv);
            }

            // Show top 2 development areas with personalized recommendations
            [lowestScore, secondLowest].forEach((scoreData, index) => {
                const [framework, score] = scoreData;
                const rec = recommendations[framework];
                
                if (rec && score < 80) { // Only show if there's room for improvement
                    const recDiv = document.createElement('div');
                    recDiv.className = 'response-category';
                    
                    const title = document.createElement('h4');
                    title.textContent = `${index + 1}. ${rec.title}`;
                    title.style.color = '#1e3a8a';
                    title.style.marginBottom = '12px';
                    recDiv.appendChild(title);
                    
                    const recList = document.createElement('div');
                    recList.className = `response-list ${framework}`;
                    
                    // Get personalized recommendations
                    const personalizedItems = getPersonalizedRecommendations(framework, rec.items);
                    
                    personalizedItems.forEach(item => {
                        const recItem = document.createElement('div');
                        recItem.className = 'response-item';
                        recItem.textContent = `• ${item}`;
                        recList.appendChild(recItem);
                    });
                    
                    recDiv.appendChild(recList);
                    recommendationsContainer.appendChild(recDiv);
                }
            });

            // Add mindset-specific recommendations based on responses
            addMindsetRecommendations(recommendationsContainer);
        }

        function addMindsetRecommendations(container) {
            // Check mindset responses (questions 22, 24, 25)
            const mindsetResponses = [22, 24, 25].map(q => answers[q]).filter(Boolean);
            const avgMindsetScore = mindsetResponses.length > 0 ? 
                mindsetResponses.reduce((sum, score) => sum + score, 0) / mindsetResponses.length : 3;

            if (avgMindsetScore < 4) {
                const mindsetDiv = document.createElement('div');
                mindsetDiv.className = 'response-category';
                
                const title = document.createElement('h4');
                title.textContent = '3. Develop Growth Mindset and Resilience';
                title.style.color = '#1e3a8a';
                title.style.marginBottom = '12px';
                mindsetDiv.appendChild(title);
                
                const mindsetList = document.createElement('div');
                mindsetList.className = 'response-list support';
                
                const mindsetItems = [
                    "Practice reframing challenges as opportunities for growth and learning",
                    "Develop stress management techniques for high-pressure situations",
                    "Focus on what you can control rather than worrying about uncertainties",
                    "Build optimism by celebrating small wins and learning from setbacks"
                ];

                mindsetItems.forEach(item => {
                    const mindsetItem = document.createElement('div');
                    mindsetItem.className = 'response-item';
                    mindsetItem.textContent = `• ${item}`;
                    mindsetList.appendChild(mindsetItem);
                });
                
                mindsetDiv.appendChild(mindsetList);
                container.appendChild(mindsetDiv);
            }
        }

        // Initialize
        updateNavigation();
        updateProgress();
        // PayPal and Company Code Functions
        async function validateCompanyCode() {
            const codeInput = document.getElementById('companyCode');
            if (!codeInput) {
                alert('Code input not found');
                return;
            }
            
            const code = codeInput.value.trim().toUpperCase();
            
            if (!code) {
                alert('Please enter a company code.');
                return;
            }
            
            // Show loading state
            const originalButtonText = document.querySelector('button[onclick*="validateCompanyCode"]').textContent;
            const button = document.querySelector('button[onclick*="validateCompanyCode"]');
            button.textContent = 'Validating...';
            button.disabled = true;
            
            try {
                // Check database first for purchased access codes
                if (supabaseClient) {
                    console.log('Checking database for code:', code);
                    
                    const { data, error } = await supabaseClient
                        .rpc('use_access_code', {
                            code_to_use: code,
                            user_email: 'assessment@example.com', // Will be updated when we have user registration
                            user_name: 'Assessment User'
                        });
                    
                    if (data === true) {
                        // Valid database code - grant access
                        console.log('Valid database code found');
                        grantAssessmentAccess(code, 'database');
                        return;
                    } else if (error) {
                        console.log('Database error:', error.message);
                    } else {
                        console.log('Code not found in database or already used');
                    }
                }
                
                // Fallback to demo codes for testing
                const demoCodes = ['DEMO2024', 'CORPORATE', 'LEADERSHIP', 'TEAM2024', 'COMPANY', 'TEST123', 'SAMPLE99', 'TRIAL2024'];
                
                if (demoCodes.includes(code)) {
                    console.log('Valid demo code found');
                    grantAssessmentAccess(code, 'demo');
                    return;
                }
                
                // Code not found anywhere
                alert('Invalid access code. Please check your code or contact support at april@aprilsabral.com');
                
            } catch (error) {
                console.error('Error validating code:', error);
                alert('Error validating code. Please try again or contact support.');
            } finally {
                // Restore button state
                button.textContent = originalButtonText;
                button.disabled = false;
            }
        }
        
        function grantAssessmentAccess(code, source) {
            console.log(`Access granted via ${source} code: ${code}`);
            
            // Hide payment gateway
            const paymentGateway = document.getElementById('paymentGateway');
            if (paymentGateway) {
                paymentGateway.style.display = 'none';
            }
            
            // Show assessment content
            const assessmentContent = document.getElementById('assessmentContent');
            if (assessmentContent) {
                assessmentContent.style.display = 'block';
            }
            
            // Update banner to show success
            const banner = document.querySelector('.demo-banner');
            if (banner) {
                if (source === 'database' || source === 'paid') {
                    banner.innerHTML = '✅ PREMIUM ACCESS - Your Leadership Assessment';
                    banner.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                } else {
                    banner.innerHTML = '🎯 DEMO MODE - Assessment Access Granted';
                    banner.style.background = 'linear-gradient(135deg, #fbbf24, #f59e0b)';
                }
            }
            
            // Add assessment mode class for mobile styling
            document.querySelector('.container').classList.add('assessment-mode');
            
            // Start personalization questions
            document.getElementById('personalizationContent').style.display = 'block';
            
            // Scroll to assessment
            document.getElementById('assessmentContent').scrollIntoView({ behavior: 'smooth' });
            
            // Success message
            if (source === 'database') {
                alert('✅ Access code validated! Your premium assessment is now ready.');
            } else if (source === 'paid') {
                // Show welcome message for paid users
                setTimeout(() => {
                    alert('🎉 Welcome to your Premium Leadership Assessment! Thank you for your purchase.');
                }, 1000);
            } else {
                alert('🎯 Demo access granted! You can now explore the assessment.');
            }
        }

        function onPaymentSuccess(type = 'individual') {
            // Grant access to assessment after successful payment
            document.getElementById('paymentGateway').style.display = 'none';
            document.getElementById('assessmentContent').style.display = 'block';
            
            // Add assessment mode class for mobile styling
            document.querySelector('.container').classList.add('assessment-mode');
            
            // Hide footer coach section
            const footer = document.querySelector('div[style*="background: linear-gradient(135deg, #0f172a"]');
            if (footer) footer.style.display = 'none';
            
            // Update banner for paid access
            document.querySelector('.demo-banner').innerHTML = 'PREMIUM ACCESS - Positive Leadership Assessment';
            
            // Scroll to top of assessment
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            alert('Payment successful! Welcome to your comprehensive leadership assessment.');
        }

        // Generate unique access codes
        function generateAccessCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // Handle group payment success and generate codes
        async function onGroupPaymentSuccess(codeCount, email, details) {
            try {
                // Prepare purchase data
                const purchaseData = {
                    email: email || details?.payer?.email_address || 'customer@example.com',
                    name: details?.payer?.name?.given_name + ' ' + details?.payer?.name?.surname || 'Customer',
                    codeCount: codeCount,
                    amount: codeCount === 5 ? 350 : codeCount === 10 ? 650 : 1400,
                    transactionId: details?.id || 'local_' + Date.now()
                };
                
                // Generate and store codes
                const result = await generateAndStoreCodes(purchaseData);
                const codes = result.codes;
                
                // Generate PDF
                const pdfDoc = generateCodesPDF(codes, purchaseData);
                
                // Show professional success page
                showProfessionalSuccess(purchaseData, codes, pdfDoc);
                
                // Send email notification if EmailJS is configured
                await sendCodesEmail(purchaseData, codes);
                
                console.log('Group purchase completed successfully:', {
                    purchaseData,
                    codes,
                    databaseStored: result.success
                });
                
            } catch (error) {
                console.error('Error processing group payment:', error);
                
                // Fallback to simple display
                const codes = Array.from({length: codeCount}, () => generateAccessCode());
                const codeDisplay = codes.map((code, index) => `${index + 1}. ${code}`).join('\n');
                
                alert(`Group purchase successful!\n\nYour ${codeCount} access codes:\n\n${codeDisplay}\n\nPlease save these codes and distribute them to your team members.`);
            }
        }

        // Initialize Stripe payment buttons
        function initializeStripePayments() {
            console.log('Initializing Stripe payment buttons...');
            
            // Individual payment button
            const individualBtn = document.getElementById('individual-payment-btn');
            if (individualBtn) {
                individualBtn.addEventListener('click', function() {
                    console.log('Individual payment clicked');
                    handleStripePayment('individual', 9700, 'Positive Effect Leaders Assessment - Individual Access', 1);
                });
            }
            
            // Group payment buttons
            const group5Btn = document.getElementById('group-5-payment-btn');
            if (group5Btn) {
                group5Btn.addEventListener('click', function() {
                    console.log('Group 5 payment clicked');
                    handleStripePayment('group', 35000, 'Positive Effect Leaders Assessment - 5 Team Members', 5);
                });
            }
            
            const group10Btn = document.getElementById('group-10-payment-btn');
            if (group10Btn) {
                group10Btn.addEventListener('click', function() {
                    console.log('Group 10 payment clicked');
                    handleStripePayment('group', 65000, 'Positive Effect Leaders Assessment - 10 Team Members', 10);
                });
            }
            
            const group25Btn = document.getElementById('group-25-payment-btn');
            if (group25Btn) {
                group25Btn.addEventListener('click', function() {
                    console.log('Group 25 payment clicked');
                    handleStripePayment('group', 140000, 'Positive Effect Leaders Assessment - 25 Team Members', 25);
                });
            }
        }

        // Stripe Payment Links
        const STRIPE_PAYMENT_LINKS = {
            individual: 'https://buy.stripe.com/bJe5kD1Et4AX3QX7VVenS03',
            group5: 'https://buy.stripe.com/4gM6oHbf3ffBgDJccbenS02', 
            group10: 'https://buy.stripe.com/4gMdR93MBebx0EL2BBenS01',
            group25: 'https://buy.stripe.com/fZucN53MBffBdrxdgfenS00'
        };

        // Handle Stripe payments via Payment Links
        function handleStripePayment(type, amount, description, teamSize = 1) {
            console.log(`Payment initiated: ${type}, team size: ${teamSize}`);
            
            let paymentLink;
            
            switch(teamSize) {
                case 1:
                    paymentLink = STRIPE_PAYMENT_LINKS.individual;
                    console.log('Using individual payment link:', paymentLink);
                    break;
                case 5:
                    paymentLink = STRIPE_PAYMENT_LINKS.group5;
                    console.log('Using group 5 payment link:', paymentLink);
                    break;
                case 10:
                    paymentLink = STRIPE_PAYMENT_LINKS.group10;
                    console.log('Using group 10 payment link:', paymentLink);
                    break;
                case 25:
                    paymentLink = STRIPE_PAYMENT_LINKS.group25;
                    console.log('Using group 25 payment link:', paymentLink);
                    break;
                default:
                    console.error('Invalid team size:', teamSize);
                    alert('Invalid package selection');
                    return;
            }
            
            if (!paymentLink || paymentLink.includes('YOUR_')) {
                console.error('Payment link not configured:', paymentLink);
                alert('Payment links not configured yet. Please contact april@aprilsabral.com');
                return;
            }
            
            console.log('Redirecting to payment link:', paymentLink);
            // Redirect to Stripe Payment Link
            window.open(paymentLink, '_self');
        }

        // Handle successful payments (called when user returns from Stripe)
        function handlePaymentSuccess() {
            const urlParams = new URLSearchParams(window.location.search);
            const sessionId = urlParams.get('session_id');
            
            if (sessionId) {
                // Payment successful - trigger the appropriate success flow
                const type = urlParams.get('type') || 'individual';
                const teamSize = parseInt(urlParams.get('team_size')) || 1;
                
                if (teamSize === 1) {
                    onPaymentSuccess(type);
                } else {
                    onGroupPaymentSuccess(teamSize, 'customer@email.com', { id: sessionId });
                }
            }
        }

        // Check for payment success on page load
        document.addEventListener('DOMContentLoaded', function() {
            handlePaymentSuccess();
        });

        // Stripe Configuration
        const stripe = Stripe('pk_live_51RQZCKG4liszaBokKp9g8TR5MK0fuYx2GwQTIDyovzPLSuNq9MvoZVIpmKg1pwyp3K7IbCFBGVAX9EsH6E3EeIhk00mVQlIfCK');

        // Initialize Stripe when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing Stripe payments...');
            initializeStripePayments();
        });

        // ====== EMAIL COLLECTION FOR SEAMLESS PAYMENT ======
        function setupEmailValidation() {
            const emailInput = document.getElementById('customerEmail');
            const nameInput = document.getElementById('customerName');
            const paymentButtons = document.getElementById('paymentButtons');
            
            function validateAndShowPayments() {
                const email = emailInput.value.trim();
                const name = nameInput.value.trim();
                
                if (email && name && isValidEmail(email)) {
                    // Store customer info for later use
                    localStorage.setItem('customerEmail', email);
                    localStorage.setItem('customerName', name);
                    
                    // Show payment buttons
                    paymentButtons.style.display = 'block';
                    
                    // Scroll to payment options
                    paymentButtons.scrollIntoView({ behavior: 'smooth', block: 'start' });
                } else {
                    paymentButtons.style.display = 'none';
                }
            }
            
            function isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
            
            // Add event listeners
            emailInput.addEventListener('input', validateAndShowPayments);
            nameInput.addEventListener('input', validateAndShowPayments);
            emailInput.addEventListener('blur', validateAndShowPayments);
            nameInput.addEventListener('blur', validateAndShowPayments);
            
            // Check on page load if values already exist
            validateAndShowPayments();
        }
        
        // ====== SEAMLESS PAYMENT ACCESS ======
        function checkForPaidAccess() {
            const urlParams = new URLSearchParams(window.location.search);
            const accessParam = urlParams.get('access');
            const hasValidAccess = localStorage.getItem('hasValidAccess');
            const paidAccessCode = localStorage.getItem('paidAccessCode');
            
            if (accessParam === 'paid' && hasValidAccess === 'true' && paidAccessCode) {
                console.log('Paid access detected, granting immediate access');
                
                // Grant immediate access without code validation
                grantAssessmentAccess(paidAccessCode, 'paid');
                
                // Clean URL
                window.history.replaceState({}, document.title, window.location.pathname);
                
                return true;
            }
            return false;
        }
        
        // Initialize paid access check when page loads
        document.addEventListener('DOMContentLoaded', function() {
            checkForPaidAccess();
        });
        
        // Initialize email validation when page loads (disabled for now)
        // document.addEventListener('DOMContentLoaded', function() {
        //     setupEmailValidation();
        // });

        // Initialize
        updateNavigation();
        updateProgress();

        // ====== ENHANCED DATABASE & EMAIL SYSTEM ======
        
        // Supabase Configuration
        const SUPABASE_URL = 'https://lfvsexynfvbtveuejeeq.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxmdnNleHluZnZidHZldWVqZWVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1MDEyNDYsImV4cCI6MjA3MzA3NzI0Nn0.Ho0qn87zZDGi2dl-q1QOae6UfUjnxb7znVX3A517qhQ';
        let supabaseClient = null;
        
        // Initialize Supabase if available
        if (typeof window.supabase !== 'undefined' && SUPABASE_URL !== 'YOUR_SUPABASE_URL') {
            supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        }
        
        // EmailJS Configuration 
        const EMAILJS_SERVICE_ID = 'service_vntq4ai';
        const EMAILJS_TEMPLATE_ID = 'template_s1qs194'; 
        const EMAILJS_PUBLIC_KEY = 'SAU17WFhPmeQLrng7';
        
        // Initialize EmailJS
        if (typeof emailjs !== 'undefined' && EMAILJS_PUBLIC_KEY !== 'YOUR_EMAILJS_PUBLIC_KEY') {
            emailjs.init(EMAILJS_PUBLIC_KEY);
        }

        // Enhanced code generation with database storage
        async function generateAndStoreCodes(purchaseData) {
            try {
                if (supabaseClient) {
                    // Store purchase in database
                    const { data: purchase, error: purchaseError } = await supabaseClient
                        .from('purchases')
                        .insert([{
                            customer_email: purchaseData.email,
                            customer_name: purchaseData.name,
                            package_size: purchaseData.codeCount,
                            amount_paid: purchaseData.amount,
                            paypal_transaction_id: purchaseData.transactionId
                        }])
                        .select()
                        .single();
                    
                    if (purchaseError) throw purchaseError;
                    
                    // Generate and store access codes
                    const { data: generatedCodes, error: codesError } = await supabaseClient
                        .rpc('create_access_codes', {
                            purchase_uuid: purchase.id,
                            code_count: purchaseData.codeCount
                        });
                    
                    if (codesError) throw codesError;
                    
                    return {
                        success: true,
                        purchase: purchase,
                        codes: generatedCodes.map(row => row.code)
                    };
                }
            } catch (error) {
                console.error('Database error:', error);
            }
            
            // Fallback to local generation if database fails or not configured
            return {
                success: false,
                codes: Array.from({length: purchaseData.codeCount}, () => generateAccessCode()),
                error: 'Database not configured - using local generation'
            };
        }

        // Generate PDF with codes
        function generateCodesPDF(codes, purchaseData) {
            if (typeof window.jspdf === 'undefined') {
                console.error('jsPDF not loaded');
                return null;
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add company branding
            doc.setFontSize(20);
            doc.setTextColor(15, 23, 42); // Navy color
            doc.text('Positive Effect Leaders Assessment', 20, 30);
            
            doc.setFontSize(16);
            doc.text('Team Access Codes', 20, 45);
            
            // Add purchase details
            doc.setFontSize(12);
            doc.setTextColor(107, 114, 128); // Gray color
            doc.text(`Purchase Date: ${new Date().toLocaleDateString()}`, 20, 60);
            doc.text(`Package: ${purchaseData.codeCount} Team Members`, 20, 70);
            doc.text(`Customer: ${purchaseData.email}`, 20, 80);
            
            // Add codes
            doc.setFontSize(14);
            doc.setTextColor(15, 23, 42);
            doc.text('Your Team Access Codes:', 20, 100);
            
            codes.forEach((code, index) => {
                const y = 115 + (index * 15);
                doc.setFontSize(12);
                doc.text(`${index + 1}. ${code}`, 30, y);
                
                // Add new page if needed
                if (y > 250 && index < codes.length - 1) {
                    doc.addPage();
                    doc.text('Team Access Codes (continued)', 20, 30);
                }
            });
            
            // Add instructions
            const instructionY = Math.min(115 + (codes.length * 15) + 20, 200);
            doc.setFontSize(10);
            doc.setTextColor(107, 114, 128);
            doc.text('Instructions:', 20, instructionY);
            doc.text('1. Share these codes with your team members', 20, instructionY + 10);
            doc.text('2. Each team member can use their code once at:', 20, instructionY + 20);
            doc.text('   https://www.thepositiveeffectindex.com/', 25, instructionY + 30);
            doc.text('3. Codes are valid for 1 year from purchase date', 20, instructionY + 40);
            
            return doc;
        }

        // Professional success display
        function showProfessionalSuccess(purchaseData, codes, pdfDoc) {
            // Hide payment section
            document.getElementById('paymentGateway').style.display = 'none';
            
            // Create professional success page
            const successDiv = document.createElement('div');
            successDiv.style.cssText = 'background: linear-gradient(135deg, #f0f9ff, #e0f2fe); padding: 40px; border-radius: 20px; margin: 20px 0; border: 2px solid #0284c7; text-align: center;';
            
            successDiv.innerHTML = `
                <div style="max-width: 600px; margin: 0 auto;">
                    <div style="background: #10b981; color: white; width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 30px auto; font-size: 40px;">✓</div>
                    
                    <h2 style="color: #0284c7; font-size: 2.5rem; margin-bottom: 20px;">Purchase Successful!</h2>
                    
                    <div style="background: white; padding: 30px; border-radius: 15px; margin: 30px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                        <h3 style="color: #0f172a; margin-bottom: 20px;">Your Team Access Codes</h3>
                        <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            ${codes.map((code, index) => `
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #e5e7eb; font-family: monospace;">
                                    <span style="font-weight: bold;">Code ${index + 1}:</span>
                                    <span style="color: #0284c7; font-size: 1.1rem; letter-spacing: 1px;">${code}</span>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                            <button onclick="downloadPDF()" style="background: #0284c7; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">
                                📄 Download PDF
                            </button>
                            <button onclick="copyAllCodes()" style="background: #10b981; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">
                                📋 Copy All Codes
                            </button>
                        </div>
                    </div>
                    
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 20px; border-radius: 10px; border-left: 4px solid #fbbf24;">
                        <h4 style="color: #0f172a; margin-bottom: 10px;">📧 Check Your Email</h4>
                        <p style="color: #3b82f6 !important; margin-bottom: 15px;">We've sent your codes and PDF to: <strong>${purchaseData.email}</strong></p>
                        <p style="color: #3b82f6 !important; font-size: 0.9rem;">Need to access codes later? Visit: <a href="https://www.thepositiveeffectindex.com/my-codes" style="color: #0284c7;">thepositiveeffectindex.com/my-codes</a></p>
                    </div>
                </div>
            `;
            
            // Store PDF globally for download
            window.currentPDF = pdfDoc;
            window.currentCodes = codes;
            
            // Insert success page
            document.querySelector('.container').appendChild(successDiv);
            
            // Update banner
            document.querySelector('.demo-banner').innerHTML = `GROUP PURCHASE COMPLETE - ${purchaseData.codeCount} Access Codes Generated`;
            
            // Scroll to success section
            successDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // PDF download function
        function downloadPDF() {
            if (window.currentPDF) {
                window.currentPDF.save('positive-effect-leaders-codes.pdf');
            }
        }

        // Copy codes function
        function copyAllCodes() {
            if (window.currentCodes) {
                const codesText = window.currentCodes.map((code, index) => `Code ${index + 1}: ${code}`).join('\n');
                navigator.clipboard.writeText(codesText).then(() => {
                    alert('All codes copied to clipboard!');
                }).catch(() => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = codesText;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('All codes copied to clipboard!');
                });
            }
        }

        // Send codes via email using EmailJS
        async function sendCodesEmail(purchaseData, codes) {
            if (typeof emailjs === 'undefined' || EMAILJS_SERVICE_ID === 'YOUR_EMAILJS_SERVICE_ID') {
                console.log('EmailJS not configured - skipping email send');
                return false;
            }
            
            try {
                // Generate formatted codes list
                const codesList = codes.map((code, index) => `${index + 1}. ${code}`).join('\n');
                
                // Create complete email content
                const emailContent = `Dear ${purchaseData.name},

Thank you for your purchase! Your team assessment codes are ready.

Package Details:
• Team Size: ${purchaseData.codeCount} members
• Amount Paid: $${purchaseData.amount}
• Purchase Date: ${new Date().toLocaleDateString()}
• Transaction ID: ${purchaseData.transactionId}

Your Team Access Codes:
${codesList}

Instructions:
1. Share these codes with your team members
2. Each person visits: https://www.thepositiveeffectindex.com/
3. Enter their unique code when prompted
4. Complete the 25-question leadership assessment
5. Receive their personalized analysis report

Each code can only be used once and expires in 1 year.

Need to access your codes again? 
Visit: https://www.thepositiveeffectindex.com/my-codes

Best regards,
April Sabral
Positive Effect Leaders Assessment

---
This is an automated email confirming your purchase.
For support, contact: support@thepositiveeffectindex.com`;

                // Send email via EmailJS
                const response = await emailjs.send(
                    EMAILJS_SERVICE_ID,
                    EMAILJS_TEMPLATE_ID,
                    {
                        to_name: purchaseData.name,
                        to_email: purchaseData.email,
                        subject: `Your Team Assessment Codes - ${purchaseData.codeCount} Members`,
                        message: emailContent,
                        package_size: purchaseData.codeCount,
                        amount_paid: purchaseData.amount,
                        codes_list: codesList,
                        purchase_date: new Date().toLocaleDateString()
                    }
                );
                
                // Log email delivery to database if available
                if (supabaseClient) {
                    await supabaseClient
                        .from('email_logs')
                        .insert([{
                            purchase_id: purchaseData.purchaseId,
                            recipient_email: purchaseData.email,
                            email_type: 'purchase_confirmation',
                            status: 'sent',
                            email_content: emailContent
                        }]);
                }
                
                console.log('Email sent successfully:', response);
                return true;
                
            } catch (error) {
                console.error('Failed to send email:', error);
                
                // Log failed email attempt
                if (supabaseClient) {
                    await supabaseClient
                        .from('email_logs')
                        .insert([{
                            purchase_id: purchaseData.purchaseId,
                            recipient_email: purchaseData.email,
                            email_type: 'purchase_confirmation',
                            status: 'failed',
                            email_content: 'Email delivery failed: ' + error.message
                        }]);
                }
                
                return false;
            }
        }

        // Add PDF download button to results
        function addPDFDownloadButton(scores) {
            const resultsDiv = document.getElementById('results');
            
            // Create download section
            const downloadSection = document.createElement('div');
            downloadSection.style.cssText = 'background: linear-gradient(135deg, #0284c7, #0369a1); padding: 30px; border-radius: 15px; margin: 30px 0; text-align: center; color: white;';
            
            downloadSection.innerHTML = `
                <h3 style="margin-bottom: 15px; font-size: 1.5rem;">📄 Get Your Complete Report</h3>
                <p style="margin-bottom: 20px; opacity: 0.9;">Enter your email to receive your personalized leadership assessment and development plan.</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <input type="email" id="reportEmail" placeholder="Enter your email address" style="
                        width: 100%; 
                        max-width: 300px; 
                        padding: 12px 16px; 
                        border: none; 
                        border-radius: 8px; 
                        font-size: 1rem;
                        margin-bottom: 15px;
                        box-sizing: border-box;
                    ">
                    <input type="text" id="reportName" placeholder="Your full name (optional)" style="
                        width: 100%; 
                        max-width: 300px; 
                        padding: 12px 16px; 
                        border: none; 
                        border-radius: 8px; 
                        font-size: 1rem;
                        margin-bottom: 15px;
                        box-sizing: border-box;
                    ">
                </div>
                
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button onclick="sendAssessmentEmail()" style="
                        background: #10b981; 
                        color: white; 
                        border: none; 
                        padding: 15px 30px; 
                        border-radius: 8px; 
                        font-weight: 600; 
                        font-size: 1.1rem;
                        cursor: pointer;
                        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                        transition: transform 0.2s;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        📧 Email My Report
                    </button>
                    <button onclick="downloadAssessmentPDF()" style="
                        background: white; 
                        color: #0284c7; 
                        border: none; 
                        padding: 15px 30px; 
                        border-radius: 8px; 
                        font-weight: 600; 
                        font-size: 1.1rem;
                        cursor: pointer;
                        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                        transition: transform 0.2s;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        📄 Download PDF
                    </button>
                </div>
            `;
            
            // Store scores globally for PDF generation
            window.currentAssessmentScores = scores;
            window.currentAssessmentAnswers = answers;
            
            // Insert download section at the end of results
            resultsDiv.appendChild(downloadSection);
        }

        // Generate comprehensive assessment PDF
        function downloadAssessmentPDF() {
            if (typeof window.jspdf === 'undefined') {
                alert('PDF generation is temporarily unavailable. Please try again later.');
                return;
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const scores = window.currentAssessmentScores;
            const pageWidth = 210; // A4 width in mm
            const margin = 20;
            let yPosition = 30;
            
            // Helper function to add text with word wrap
            function addText(text, y, fontSize = 12, isBold = false) {
                doc.setFontSize(fontSize);
                if (isBold) {
                    doc.setFont(undefined, 'bold');
                } else {
                    doc.setFont(undefined, 'normal');
                }
                
                const splitText = doc.splitTextToSize(text, pageWidth - 2 * margin);
                doc.text(splitText, margin, y);
                return y + (splitText.length * fontSize * 0.5);
            }
            
            // Add header and branding
            doc.setFillColor(15, 23, 42); // Navy blue
            doc.rect(0, 0, pageWidth, 25, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('Positive Effect Leaders Assessment', margin, 16);
            
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('Personal Leadership Development Report', margin, 22);
            
            // Reset text color
            doc.setTextColor(0, 0, 0);
            yPosition = 40;
            
            // Assessment Summary
            yPosition = addText('LEADERSHIP ASSESSMENT SUMMARY', yPosition, 16, true);
            yPosition += 5;
            yPosition = addText(`Assessment Date: ${new Date().toLocaleDateString()}`, yPosition, 10);
            yPosition += 10;
            
            // Framework Scores
            yPosition = addText('YOUR LEADERSHIP DIMENSIONS', yPosition, 14, true);
            yPosition += 5;
            
            const frameworkNames = {
                performance: 'Performance & Growth Manager',
                relationship: 'Relationship Builder', 
                communication: 'Connecting Communicator',
                coaching: 'Coach & People Developer',
                ownership: 'Ownership & Accountability Driver',
                mindset: 'Mindset & Energy Steward'
            };
            
            Object.keys(scores).forEach(framework => {
                const score = Math.round((scores[framework] / 25) * 100);
                const level = score >= 80 ? 'Excellent' : score >= 60 ? 'Good' : score >= 40 ? 'Developing' : 'Needs Focus';
                yPosition = addText(`${frameworkNames[framework]}: ${score}% - ${level}`, yPosition, 11);
                yPosition += 2;
            });
            
            yPosition += 10;
            
            // Leadership Insights
            yPosition = addText('YOUR LEADERSHIP PROFILE', yPosition, 14, true);
            yPosition += 5;
            
            // Find strongest and weakest areas
            const maxScore = Math.max(...Object.values(scores));
            const minScore = Math.min(...Object.values(scores));
            const strongestArea = Object.keys(scores).find(key => scores[key] === maxScore);
            const developmentArea = Object.keys(scores).find(key => scores[key] === minScore);
            
            yPosition = addText(`Your strongest leadership dimension is ${frameworkNames[strongestArea]}, where you demonstrate excellent capabilities. This is a key strength you can leverage to influence and inspire your team.`, yPosition, 11);
            yPosition += 8;
            
            yPosition = addText(`Your primary development opportunity is in ${frameworkNames[developmentArea]}. Focusing on this area will have the greatest positive impact on your overall leadership effectiveness.`, yPosition, 11);
            yPosition += 15;
            
            // Development Recommendations
            yPosition = addText('PERSONALIZED DEVELOPMENT PLAN', yPosition, 14, true);
            yPosition += 5;
            
            // 30/60/90 Day Plan
            yPosition = addText('30-DAY PRIORITY ACTIONS', yPosition, 12, true);
            yPosition += 3;
            
            const day30Actions = [
                `Focus on strengthening your ${frameworkNames[developmentArea]} skills through daily practice`,
                'Seek feedback from team members on your leadership approach',
                'Schedule regular one-on-one meetings with direct reports',
                'Begin implementing one new leadership technique each week'
            ];
            
            day30Actions.forEach(action => {
                yPosition = addText(`• ${action}`, yPosition, 10);
                yPosition += 2;
            });
            
            yPosition += 8;
            yPosition = addText('60-DAY DEVELOPMENT GOALS', yPosition, 12, true);
            yPosition += 3;
            
            const day60Actions = [
                `Demonstrate measurable improvement in ${frameworkNames[developmentArea]}`,
                'Establish a regular feedback loop with your manager and peers',
                'Complete a relevant leadership development course or workshop',
                'Mentor or coach another team member to develop your people skills'
            ];
            
            day60Actions.forEach(action => {
                yPosition = addText(`• ${action}`, yPosition, 10);
                yPosition += 2;
            });
            
            // Check if we need a new page
            if (yPosition > 250) {
                doc.addPage();
                yPosition = 30;
            }
            
            yPosition += 8;
            yPosition = addText('90-DAY MASTERY OBJECTIVES', yPosition, 12, true);
            yPosition += 3;
            
            const day90Actions = [
                'Achieve consistent high performance across all six leadership dimensions',
                'Become a recognized leader and positive influence in your organization',
                'Successfully lead a significant project or initiative demonstrating your growth',
                'Help develop other emerging leaders using your enhanced capabilities'
            ];
            
            day90Actions.forEach(action => {
                yPosition = addText(`• ${action}`, yPosition, 10);
                yPosition += 2;
            });
            
            // Footer
            yPosition = Math.max(yPosition + 20, 270);
            doc.setFillColor(15, 23, 42);
            doc.rect(0, yPosition, pageWidth, 15, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(10);
            doc.text('© Positive Effect Leaders Assessment - Confidential Leadership Development Report', margin, yPosition + 8);
            doc.text(`Generated: ${new Date().toLocaleDateString()} | www.thepositiveeffectindex.com`, margin, yPosition + 12);
            
            // Save the PDF
            doc.save('positive-effect-leadership-report.pdf');
        }

        // Send individual assessment report via email
        async function sendAssessmentEmail() {
            const email = document.getElementById('reportEmail').value.trim();
            const name = document.getElementById('reportName').value.trim() || 'Assessment Participant';
            
            if (!email) {
                alert('Please enter your email address to receive your report.');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                return;
            }
            
            if (typeof emailjs === 'undefined' || EMAILJS_SERVICE_ID === 'YOUR_EMAILJS_SERVICE_ID') {
                alert('Email service is not configured. Please use the PDF download option.');
                return;
            }
            
            try {
                // Show loading state
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '📤 Sending...';
                button.disabled = true;
                
                const scores = window.currentAssessmentScores;
                const frameworkNames = {
                    performance: 'Performance & Growth Manager',
                    relationship: 'Relationship Builder', 
                    communication: 'Connecting Communicator',
                    coaching: 'Coach & People Developer',
                    ownership: 'Ownership & Accountability Driver',
                    mindset: 'Mindset & Energy Steward'
                };
                
                // Generate scores summary
                const scoresText = Object.keys(scores).map(framework => {
                    const score = Math.round((scores[framework] / 25) * 100);
                    const level = score >= 80 ? 'Excellent' : score >= 60 ? 'Good' : score >= 40 ? 'Developing' : 'Needs Focus';
                    return `• ${frameworkNames[framework]}: ${score}% - ${level}`;
                }).join('\\n');
                
                // Find strongest and development areas
                const maxScore = Math.max(...Object.values(scores));
                const minScore = Math.min(...Object.values(scores));
                const strongestArea = Object.keys(scores).find(key => scores[key] === maxScore);
                const developmentArea = Object.keys(scores).find(key => scores[key] === minScore);
                
                // Create email content
                const emailContent = `Dear ${name},

Thank you for completing the Positive Effect Leaders Assessment!

Your Leadership Assessment Results:
${scoresText}

Key Insights:
✅ Your strongest leadership dimension is ${frameworkNames[strongestArea]}
🎯 Your primary development opportunity is ${frameworkNames[developmentArea]}

Your Personalized 30/60/90 Day Development Plan:

30-DAY PRIORITY ACTIONS:
• Focus on strengthening your ${frameworkNames[developmentArea]} skills through daily practice
• Seek feedback from team members on your leadership approach
• Schedule regular one-on-one meetings with direct reports
• Begin implementing one new leadership technique each week

60-DAY DEVELOPMENT GOALS:
• Demonstrate measurable improvement in ${frameworkNames[developmentArea]}
• Establish a regular feedback loop with your manager and peers
• Complete a relevant leadership development course or workshop
• Mentor or coach another team member to develop your people skills

90-DAY MASTERY OBJECTIVES:
• Achieve consistent high performance across all six leadership dimensions
• Become a recognized leader and positive influence in your organization
• Successfully lead a significant project or initiative demonstrating your growth
• Help develop other emerging leaders using your enhanced capabilities

For your complete detailed report with comprehensive analysis, visit:
https://www.thepositiveeffectindex.com/ and use the PDF download feature.

Best regards,
April Sabral
Positive Effect Leaders Assessment

---
This assessment was completed on ${new Date().toLocaleDateString()}
For support: support@thepositiveeffectindex.com`;

                // Send email via EmailJS
                const response = await emailjs.send(
                    EMAILJS_SERVICE_ID,
                    EMAILJS_TEMPLATE_ID,
                    {
                        to_name: name,
                        to_email: email,
                        subject: 'Your Positive Effect Leadership Assessment Results',
                        message: emailContent
                    }
                );
                
                // Show success message
                button.innerHTML = '✅ Email Sent!';
                button.style.background = '#10b981';
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.disabled = false;
                    button.style.background = '#10b981';
                }, 3000);
                
                alert(`Your leadership assessment results have been sent to ${email}! Check your inbox (and spam folder) for your personalized development plan.`);
                
                console.log('Assessment email sent successfully:', response);
                
            } catch (error) {
                console.error('Failed to send assessment email:', error);
                
                // Reset button
                const button = event.target;
                button.innerHTML = originalText;
                button.disabled = false;
                
                alert('Sorry, there was an issue sending your email. Please try the PDF download option instead.');
            }
        }

        // Executive Team Aggregation Functions
        let executiveTeamData = {
            teamMembers: [],
            completedAssessments: {},
            teamSize: 0,
            completionStatus: {}
        };

        function initializeExecutiveTeam(teamMemberNames, teamSize) {
            executiveTeamData.teamMembers = teamMemberNames;
            executiveTeamData.teamSize = teamSize;
            
            // Initialize completion status
            teamMemberNames.forEach(name => {
                executiveTeamData.completionStatus[name] = false;
            });
        }

        function saveExecutiveAssessment(executiveName, scores, personalizationData, responseData) {
            // Store individual executive's assessment results
            executiveTeamData.completedAssessments[executiveName] = {
                name: executiveName,
                scores: scores,
                personalization: personalizationData,
                responses: responseData,
                completedAt: new Date(),
                overallScore: calculateOverallScore(scores)
            };
            
            // Mark as completed
            executiveTeamData.completionStatus[executiveName] = true;
            
            // Check if all team members have completed
            const completedCount = Object.keys(executiveTeamData.completedAssessments).length;
            
            if (completedCount === executiveTeamData.teamSize) {
                // All executives completed - generate team dashboard
                generateExecutiveTeamDashboard();
            } else {
                // Show progress update
                showTeamProgressUpdate(completedCount, executiveTeamData.teamSize);
            }
        }

        function calculateOverallScore(scores) {
            const totalScore = Object.values(scores).reduce((sum, score) => sum + score, 0);
            return Math.round(totalScore / Object.keys(scores).length);
        }

        function generateExecutiveTeamDashboard() {
            const assessments = Object.values(executiveTeamData.completedAssessments);
            
            // Calculate team statistics
            const teamStats = calculateTeamStatistics(assessments);
            
            // Generate team heat map
            generateTeamHeatMap(assessments);
            
            // Create individual executive profiles
            generateExecutiveProfiles(assessments);
            
            // Identify development priorities
            generateTeamPriorities(assessments, teamStats);
            
            // Create succession planning matrix
            generateSuccessionMatrix(assessments);
            
            // Generate board executive summary
            generateBoardSummary(assessments, teamStats);
            
            // Show the dashboard
            document.getElementById('executiveDashboard').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            
            // Update banner
            document.querySelector('.demo-banner').innerHTML = '📊 EXECUTIVE TEAM DASHBOARD - Complete Analysis';
            
            // Scroll to dashboard
            document.getElementById('executiveDashboard').scrollIntoView({ behavior: 'smooth' });
        }

        function calculateTeamStatistics(assessments) {
            const dimensions = ['relationship', 'communication', 'mindset', 'ownership', 'coaching', 'performance'];
            const teamStats = {
                averageScores: {},
                overallAverage: 0,
                strongest: '',
                weakest: '',
                standardDeviations: {}
            };

            // Calculate average scores for each dimension
            dimensions.forEach(dim => {
                const scores = assessments.map(exec => exec.scores[dim] || 0);
                teamStats.averageScores[dim] = Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length);
            });

            // Find strongest and weakest dimensions
            const avgScores = Object.entries(teamStats.averageScores);
            teamStats.strongest = avgScores.reduce((max, current) => current[1] > max[1] ? current : max)[0];
            teamStats.weakest = avgScores.reduce((min, current) => current[1] < min[1] ? current : min)[0];
            
            // Calculate overall team average
            teamStats.overallAverage = Math.round(
                Object.values(teamStats.averageScores).reduce((sum, score) => sum + score, 0) / dimensions.length
            );

            return teamStats;
        }

        function generateTeamHeatMap(assessments) {
            const dimensions = {
                'relationship': 'Relationship Builder',
                'communication': 'Positive Intent Communicator',
                'mindset': 'Mindset & Energy Steward',
                'ownership': 'Ownership & Accountability Driver',
                'coaching': 'Coach & People Developer',
                'performance': 'Performance & Growth Manager'
            };

            let heatMapHTML = `
                <div style="display: grid; grid-template-columns: 200px repeat(${assessments.length}, 1fr); gap: 10px; align-items: center;">
                    <div style="font-weight: bold; color: #1e3a8a;">Leadership Dimension</div>
                    ${assessments.map(exec => `<div style="font-weight: bold; color: #1e3a8a; text-align: center; font-size: 0.9rem;">${exec.name}</div>`).join('')}
            `;

            Object.entries(dimensions).forEach(([key, label]) => {
                heatMapHTML += `<div style="font-size: 0.9rem; color: #1e3a8a; font-weight: 500;">${label}</div>`;
                
                assessments.forEach(exec => {
                    const score = exec.scores[key] || 0;
                    const color = getHeatMapColor(score);
                    heatMapHTML += `
                        <div style="background: ${color}; padding: 10px; text-align: center; border-radius: 6px; font-weight: bold; color: ${score > 70 ? 'white' : '#1e3a8a'};">
                            ${score}
                        </div>
                    `;
                });
            });

            heatMapHTML += '</div>';
            document.getElementById('teamHeatmap').innerHTML = heatMapHTML;
        }

        function getHeatMapColor(score) {
            if (score >= 85) return '#22c55e'; // Green
            if (score >= 75) return '#84cc16'; // Light green  
            if (score >= 65) return '#eab308'; // Yellow
            if (score >= 50) return '#f97316'; // Orange
            return '#ef4444'; // Red
        }

        function generateExecutiveProfiles(assessments) {
            let profilesHTML = '';
            
            assessments.forEach(exec => {
                const topStrength = Object.entries(exec.scores).reduce((max, current) => 
                    current[1] > max[1] ? current : max
                )[0];
                
                const developmentArea = Object.entries(exec.scores).reduce((min, current) => 
                    current[1] < min[1] ? current : min
                )[0];

                profilesHTML += `
                    <div style="background: #ffffff; padding: 25px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);">
                        <h4 style="color: #1e3a8a; margin-bottom: 15px; font-size: 1.2rem;">${exec.name}</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>
                                <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 5px;">Overall Score</div>
                                <div style="font-size: 1.5rem; font-weight: bold; color: #1e3a8a;">${exec.overallScore}</div>
                            </div>
                            <div>
                                <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 5px;">Top Strength</div>
                                <div style="font-size: 1rem; font-weight: bold; color: #22c55e;">${getDimensionLabel(topStrength)}</div>
                            </div>
                            <div>
                                <div style="font-size: 0.9rem; color: #6b7280; margin-bottom: 5px;">Development Focus</div>
                                <div style="font-size: 1rem; font-weight: bold; color: #f59e0b;">${getDimensionLabel(developmentArea)}</div>
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: #1e3a8a;">
                            ${getExecutiveSummary(exec)}
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('executiveProfiles').innerHTML = profilesHTML;
        }

        function getDimensionLabel(dimensionKey) {
            const labels = {
                'relationship': 'Relationship Builder',
                'communication': 'Positive Intent Communicator', 
                'mindset': 'Mindset & Energy Steward',
                'ownership': 'Ownership & Accountability Driver',
                'coaching': 'Coach & People Developer',
                'performance': 'Performance & Growth Manager'
            };
            return labels[dimensionKey] || dimensionKey;
        }

        function getExecutiveSummary(exec) {
            const role = exec.personalization?.role || 'senior leader';
            const experience = exec.personalization?.experience || 'experienced';
            const topScore = Math.max(...Object.values(exec.scores));
            
            if (topScore >= 85) {
                return `Strong ${role} with ${experience} background. Demonstrates exceptional leadership capabilities with particular strength in ${getDimensionLabel(Object.entries(exec.scores).find(([k, v]) => v === topScore)[0])}.`;
            } else if (topScore >= 75) {
                return `Solid ${role} with ${experience} background. Shows strong leadership foundation with development opportunities to reach full potential.`;
            } else {
                return `Developing ${role} with ${experience} background. Would benefit from focused leadership development in key areas.`;
            }
        }

        function showTeamProgressUpdate(completed, total) {
            const progressHTML = `
                <div style="background: linear-gradient(135deg, #fffbeb, #fef3c7); padding: 25px; border-radius: 15px; margin: 30px auto; max-width: 600px; text-align: center; border: 2px solid #fbbf24;">
                    <h3 style="color: #1e3a8a; margin-bottom: 15px;">Team Assessment Progress</h3>
                    <div style="font-size: 2rem; font-weight: bold; color: #1e3a8a; margin-bottom: 10px;">${completed} of ${total}</div>
                    <p style="color: #1e3a8a; margin-bottom: 20px;">Executives have completed their leadership assessment</p>
                    <div style="background: #e5e7eb; height: 10px; border-radius: 5px; overflow: hidden;">
                        <div style="background: linear-gradient(90deg, #fbbf24, #f59e0b); height: 100%; width: ${(completed/total)*100}%; transition: width 0.5s ease;"></div>
                    </div>
                    <p style="color: #6b7280; margin-top: 15px; font-size: 0.9rem;">
                        Executive team dashboard will be available when all members complete their assessment.
                    </p>
                </div>
            `;
            
            // Show progress instead of full results
            document.getElementById('results').innerHTML = progressHTML;
        }

        function generateTeamPriorities(assessments, teamStats) {
            const prioritiesHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #ef4444; margin-bottom: 15px;">🎯 Immediate Development Priorities</h4>
                    <div style="background: #fef2f2; padding: 20px; border-radius: 10px; border-left: 4px solid #ef4444; margin-bottom: 20px;">
                        <strong>1. ${getDimensionLabel(teamStats.weakest)}</strong> - Team Average: ${teamStats.averageScores[teamStats.weakest]}
                        <p style="margin: 10px 0 0 0; color: #6b7280; font-size: 0.9rem;">
                            This dimension shows the largest opportunity for team-wide improvement. Consider group development sessions and peer mentoring.
                        </p>
                    </div>
                    <div style="background: #fffbeb; padding: 20px; border-radius: 10px; border-left: 4px solid #f59e0b;">
                        <strong>2. Individual Coaching Priorities</strong>
                        <p style="margin: 10px 0 0 0; color: #6b7280; font-size: 0.9rem;">
                            ${assessments.filter(exec => exec.overallScore < 70).length} executives would benefit from targeted individual coaching.
                        </p>
                    </div>
                </div>
                <div>
                    <h4 style="color: #22c55e; margin-bottom: 15px;">💪 Leverage Team Strengths</h4>
                    <div style="background: #f0fdf4; padding: 20px; border-radius: 10px; border-left: 4px solid #22c55e;">
                        <strong>${getDimensionLabel(teamStats.strongest)}</strong> - Team Average: ${teamStats.averageScores[teamStats.strongest]}
                        <p style="margin: 10px 0 0 0; color: #6b7280; font-size: 0.9rem;">
                            Use this collective strength to mentor other teams and drive organizational initiatives.
                        </p>
                    </div>
                </div>
            `;
            document.getElementById('teamPriorities').innerHTML = prioritiesHTML;
        }

        function generateSuccessionMatrix(assessments) {
            const successionHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    ${assessments.map(exec => `
                        <div style="background: ${getSuccessionColor(exec.overallScore)}; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #1e3a8a; margin-bottom: 10px;">${exec.name}</h4>
                            <div style="font-size: 0.9rem; color: #1e3a8a; margin-bottom: 10px;">
                                <strong>Readiness Level:</strong> ${getSuccessionReadiness(exec.overallScore)}
                            </div>
                            <div style="font-size: 0.9rem; color: #6b7280;">
                                ${getSuccessionRecommendation(exec)}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            document.getElementById('successionMatrix').innerHTML = successionHTML;
        }

        function getSuccessionColor(score) {
            if (score >= 85) return '#f0fdf4'; // Light green - ready now
            if (score >= 75) return '#fffbeb'; // Light yellow - ready with development
            return '#fef2f2'; // Light red - needs significant development
        }

        function getSuccessionReadiness(score) {
            if (score >= 85) return 'Ready Now';
            if (score >= 75) return 'Ready with Development'; 
            return 'Needs Development';
        }

        function getSuccessionRecommendation(exec) {
            if (exec.overallScore >= 85) {
                return 'Strong candidate for promotion or expanded responsibilities. Consider stretch assignments and board exposure.';
            } else if (exec.overallScore >= 75) {
                return 'Solid performer who would benefit from targeted development in 1-2 key areas before next-level advancement.';
            } else {
                return 'Focus on foundational leadership development and coaching before considering for advancement.';
            }
        }

        function generateBoardSummary(assessments, teamStats) {
            const highPerformers = assessments.filter(exec => exec.overallScore >= 85).length;
            const readyForPromotion = assessments.filter(exec => exec.overallScore >= 80).length;
            
            const summaryHTML = `
                <div style="margin-bottom: 25px;">
                    <h3 style="color: #1e3a8a; margin-bottom: 15px;">📈 Executive Summary</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #1e3a8a;">${teamStats.overallAverage}</div>
                            <div style="font-size: 0.9rem; color: #6b7280;">Team Average Score</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #22c55e;">${highPerformers}</div>
                            <div style="font-size: 0.9rem; color: #6b7280;">High Performers (85+)</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #f59e0b;">${readyForPromotion}</div>
                            <div style="font-size: 0.9rem; color: #6b7280;">Promotion Ready (80+)</div>
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <h3 style="color: #1e3a8a; margin-bottom: 15px;">🎯 Strategic Recommendations</h3>
                    <div style="background: #ffffff; padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #1e3a8a; margin-bottom: 10px;">Leadership Development Investment</h4>
                        <p style="color: #1e3a8a; font-size: 0.95rem; line-height: 1.5; margin: 0;">
                            Focus development resources on <strong>${getDimensionLabel(teamStats.weakest)}</strong> to achieve maximum ROI. 
                            Estimated 12-month improvement potential: ${Math.min(15, 85 - teamStats.averageScores[teamStats.weakest])} points team-wide.
                        </p>
                    </div>
                    <div style="background: #ffffff; padding: 20px; border-radius: 10px;">
                        <h4 style="color: #1e3a8a; margin-bottom: 10px;">Succession Planning Status</h4>
                        <p style="color: #1e3a8a; font-size: 0.95rem; line-height: 1.5; margin: 0;">
                            ${readyForPromotion} executives demonstrate readiness for expanded responsibilities. 
                            Recommend accelerated development programs for the remaining ${assessments.length - readyForPromotion} leaders.
                        </p>
                    </div>
                </div>
                
                <div>
                    <h3 style="color: #1e3a8a; margin-bottom: 15px;">⏰ Recommended Timeline</h3>
                    <div style="background: #ffffff; padding: 20px; border-radius: 10px;">
                        <div style="margin-bottom: 10px;"><strong>Q1:</strong> Begin team development program focusing on ${getDimensionLabel(teamStats.weakest)}</div>
                        <div style="margin-bottom: 10px;"><strong>Q2:</strong> Implement individual coaching plans for executives scoring below 75</div>
                        <div style="margin-bottom: 10px;"><strong>Q3:</strong> Mid-year leadership assessment to track progress</div>
                        <div><strong>Q4:</strong> Succession planning review and next-year development strategy</div>
                    </div>
                </div>
            `;
            
            document.getElementById('boardSummary').innerHTML = summaryHTML;
            
            // Update dashboard statistics
            document.getElementById('teamAverageScore').textContent = teamStats.overallAverage;
            document.getElementById('strongestDimension').textContent = getDimensionLabel(teamStats.strongest);
            document.getElementById('developmentPriority').textContent = getDimensionLabel(teamStats.weakest);
        }

        function downloadExecutiveReport() {
            // This would generate a comprehensive PDF report
            alert('Executive team report download functionality would be implemented here. Report includes:\n\n• Team heat map and statistics\n• Individual executive profiles\n• Succession planning matrix\n• Development recommendations\n• Board presentation slides');
        }

        // Update the showResults function to integrate with team tracking
        function showResultsWithTeamTracking() {
            // Get executive name (you'll need to collect this during assessment)
            const executiveName = prompt("Please enter your name for the executive team report:") || "Executive " + Date.now();
            
            // Calculate scores
            const scores = calculateDemoScores();
            
            // Save to team data
            saveExecutiveAssessment(executiveName, scores, personalizationData, responses);
            
            // Show individual results first
            showResults();
        }

        // 360-Degree Organizational Feedback Functions
        let currentOrgQuestion = 1;
        const totalOrgQuestions = 10;
        let orgResponses = {};
        
        const orgQuestionMapping = {
            1: 'collaboration',
            2: 'psychological_safety', 
            3: 'decision_making',
            4: 'change_adaptability',
            5: 'performance_standards',
            6: 'learning_development',
            7: 'communication',
            8: 'resource_allocation',
            9: 'recognition',
            10: 'strategic_clarity'
        };

        function selectOrgAnswer(questionNum, value, element) {
            // Remove selection from all options in this question
            const questionDiv = document.querySelector(`[data-org-question="${questionNum}"]`);
            const options = questionDiv.querySelectorAll('.answer-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Add selection to clicked option
            element.classList.add('selected');
            
            // Store response
            orgResponses[questionNum] = value;
            
            // Show next button if this is the current question
            if (questionNum === currentOrgQuestion) {
                document.getElementById('orgNextButton').style.display = 'inline-block';
                if (currentOrgQuestion === totalOrgQuestions) {
                    document.getElementById('orgCompleteButton').style.display = 'inline-block';
                    document.getElementById('orgNextButton').style.display = 'none';
                }
            }
        }

        function nextOrgQuestion() {
            if (currentOrgQuestion < totalOrgQuestions) {
                // Hide current question
                document.querySelector(`[data-org-question="${currentOrgQuestion}"]`).style.display = 'none';
                
                // Show next question
                currentOrgQuestion++;
                document.querySelector(`[data-org-question="${currentOrgQuestion}"]`).style.display = 'block';
                
                // Update progress
                updateOrgProgress();
                
                // Update navigation
                document.getElementById('orgPrevButton').style.display = 'inline-block';
                
                // Check if answer already selected for this question
                if (orgResponses[currentOrgQuestion]) {
                    document.getElementById('orgNextButton').style.display = 'inline-block';
                    if (currentOrgQuestion === totalOrgQuestions) {
                        document.getElementById('orgCompleteButton').style.display = 'inline-block';
                        document.getElementById('orgNextButton').style.display = 'none';
                    }
                } else {
                    document.getElementById('orgNextButton').style.display = 'none';
                    document.getElementById('orgCompleteButton').style.display = 'none';
                }
            }
        }

        function previousOrgQuestion() {
            if (currentOrgQuestion > 1) {
                // Hide current question
                document.querySelector(`[data-org-question="${currentOrgQuestion}"]`).style.display = 'none';
                
                // Show previous question
                currentOrgQuestion--;
                document.querySelector(`[data-org-question="${currentOrgQuestion}"]`).style.display = 'block';
                
                // Update progress
                updateOrgProgress();
                
                // Update navigation
                if (currentOrgQuestion === 1) {
                    document.getElementById('orgPrevButton').style.display = 'none';
                }
                
                document.getElementById('orgNextButton').style.display = 'inline-block';
                document.getElementById('orgCompleteButton').style.display = 'none';
            }
        }

        function updateOrgProgress() {
            const progressPercentage = (currentOrgQuestion / totalOrgQuestions) * 100;
            document.getElementById('orgProgressFill').style.width = progressPercentage + '%';
            document.getElementById('orgCurrentQuestion').textContent = currentOrgQuestion;
        }

        function completeOrgFeedback() {
            // Calculate organizational scores
            const orgScores = calculateOrgScores();
            
            // Display organizational results
            displayOrgResults(orgScores);
            
            // Hide organizational feedback section and show results
            document.getElementById('organizationalFeedback').style.display = 'none';
            document.getElementById('organizationalResults').style.display = 'block';
            
            // Scroll to results
            document.getElementById('organizationalResults').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        function calculateOrgScores() {
            const orgFrameworks = {
                collaboration: [],
                psychological_safety: [],
                decision_making: [],
                change_adaptability: [],
                performance_standards: [],
                learning_development: [],
                communication: [],
                resource_allocation: [],
                recognition: [],
                strategic_clarity: []
            };

            // Map responses to frameworks
            for (let i = 1; i <= totalOrgQuestions; i++) {
                if (orgResponses[i]) {
                    const framework = orgQuestionMapping[i];
                    orgFrameworks[framework].push(orgResponses[i]);
                }
            }

            // Calculate average scores for each framework
            const scores = {};
            for (const [framework, responses] of Object.entries(orgFrameworks)) {
                if (responses.length > 0) {
                    const sum = responses.reduce((a, b) => a + b, 0);
                    scores[framework] = Math.round((sum / responses.length / 5) * 100); // Convert to percentage
                }
            }

            return scores;
        }

        function displayOrgResults(scores) {
            displayOrgRadar(scores);
            displayOrgFrameworkScores(scores);
            displayOrgStrengthsAndChallenges(scores);
            displayOrgRecommendations(scores);
            displayLeadershipImpactComparison(scores);
        }

        function displayOrgRadar(scores) {
            const radarElement = document.getElementById('organizationalRadar');
            const frameworkNames = {
                collaboration: 'Team Collaboration',
                psychological_safety: 'Psychological Safety',
                decision_making: 'Decision Making',
                change_adaptability: 'Change Adaptability',
                performance_standards: 'Performance Standards',
                learning_development: 'Learning & Development',
                communication: 'Communication',
                resource_allocation: 'Resource Management',
                recognition: 'Recognition Culture',
                strategic_clarity: 'Strategic Clarity'
            };

            let radarHTML = '<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;">';
            
            for (const [key, name] of Object.entries(frameworkNames)) {
                const score = scores[key] || 0;
                const color = score >= 80 ? '#059669' : score >= 60 ? '#fbbf24' : '#dc2626';
                
                radarHTML += `
                    <div style="text-align: center; min-width: 120px;">
                        <div style="color: ${color}; font-weight: bold; font-size: 1.5rem;">${score}%</div>
                        <div style="font-size: 0.8rem; color: #64748b; margin-top: 5px;">${name}</div>
                    </div>
                `;
            }
            
            radarHTML += '</div>';
            radarElement.innerHTML = radarHTML;
        }

        function displayOrgFrameworkScores(scores) {
            const container = document.getElementById('organizationalScores');
            const frameworkNames = {
                collaboration: 'Team Collaboration',
                psychological_safety: 'Psychological Safety', 
                decision_making: 'Decision Making',
                change_adaptability: 'Change Adaptability',
                performance_standards: 'Performance Standards',
                learning_development: 'Learning & Development',
                communication: 'Communication Effectiveness',
                resource_allocation: 'Resource Management',
                recognition: 'Recognition Culture',
                strategic_clarity: 'Strategic Clarity'
            };

            let scoresHTML = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">';
            
            for (const [key, name] of Object.entries(frameworkNames)) {
                const score = scores[key] || 0;
                const barColor = score >= 80 ? '#059669' : score >= 60 ? '#fbbf24' : '#dc2626';
                const bgColor = score >= 80 ? '#d1fae5' : score >= 60 ? '#fef3c7' : '#fee2e2';
                
                scoresHTML += `
                    <div style="background: ${bgColor}; padding: 15px; border-radius: 8px; border-left: 4px solid ${barColor};">
                        <div style="font-weight: 600; color: #1f2937; margin-bottom: 8px; font-size: 0.9rem;">${name}</div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="flex: 1; background: #e5e7eb; height: 8px; border-radius: 4px;">
                                <div style="background: ${barColor}; height: 100%; width: ${score}%; border-radius: 4px;"></div>
                            </div>
                            <span style="font-weight: bold; color: ${barColor}; font-size: 1.1rem;">${score}%</span>
                        </div>
                    </div>
                `;
            }
            
            scoresHTML += '</div>';
            container.innerHTML = scoresHTML;
        }

        function displayOrgStrengthsAndChallenges(scores) {
            const strengthsElement = document.getElementById('orgStrengths');
            const challengesElement = document.getElementById('orgChallenges');
            
            const frameworkNames = {
                collaboration: 'Team Collaboration',
                psychological_safety: 'Psychological Safety',
                decision_making: 'Decision Making', 
                change_adaptability: 'Change Adaptability',
                performance_standards: 'Performance Standards',
                learning_development: 'Learning & Development',
                communication: 'Communication Effectiveness',
                resource_allocation: 'Resource Management',
                recognition: 'Recognition Culture',
                strategic_clarity: 'Strategic Clarity'
            };

            // Sort by scores to identify strengths and challenges
            const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const strengths = sortedScores.slice(0, 3); // Top 3
            const challenges = sortedScores.slice(-3).reverse(); // Bottom 3

            // Display strengths
            let strengthsHTML = '';
            strengths.forEach(([key, score]) => {
                strengthsHTML += `
                    <div style="margin-bottom: 12px; padding: 12px; background: #f0fdf4; border-left: 3px solid #22c55e; border-radius: 6px;">
                        <div style="font-weight: 600; color: #059669;">${frameworkNames[key]}</div>
                        <div style="font-size: 0.9rem; color: #16a34a; margin-top: 4px;">${score}% effectiveness</div>
                    </div>
                `;
            });
            strengthsElement.innerHTML = strengthsHTML;

            // Display challenges  
            let challengesHTML = '';
            challenges.forEach(([key, score]) => {
                challengesHTML += `
                    <div style="margin-bottom: 12px; padding: 12px; background: #fef2f2; border-left: 3px solid #ef4444; border-radius: 6px;">
                        <div style="font-weight: 600; color: #dc2626;">${frameworkNames[key]}</div>
                        <div style="font-size: 0.9rem; color: #dc2626; margin-top: 4px;">${score}% effectiveness - Priority for improvement</div>
                    </div>
                `;
            });
            challengesElement.innerHTML = challengesHTML;
        }

        function displayOrgRecommendations(scores) {
            const container = document.getElementById('orgRecommendations');
            
            const recommendations = {
                collaboration: {
                    low: "Implement cross-functional project teams and regular interdepartmental meetings to break down silos.",
                    medium: "Establish clear communication protocols and shared project management tools to improve information flow.",
                    high: "Leverage your strong collaborative culture as a competitive advantage and share best practices across the organization."
                },
                psychological_safety: {
                    low: "Create 'failure celebration' sessions where teams share learnings from mistakes without blame.",
                    medium: "Implement regular pulse surveys and anonymous feedback mechanisms to gauge psychological safety levels.",
                    high: "Your culture of trust is a significant asset - consider mentoring other organizations in building psychological safety."
                },
                decision_making: {
                    low: "Establish clear decision-making frameworks (like RACI) and delegate authority to appropriate levels.",
                    medium: "Streamline decision processes by identifying bottlenecks and creating faster approval pathways for routine decisions.",
                    high: "Your effective decision-making process is enabling rapid execution - document and replicate across all areas."
                },
                change_adaptability: {
                    low: "Create a change management office and provide change leadership training for managers.",
                    medium: "Develop better change communication strategies and involve employees more in the change planning process.",
                    high: "Your adaptability is a key strength - consider becoming a change leader in your industry."
                },
                performance_standards: {
                    low: "Implement clear performance metrics and regular check-ins to ensure accountability and clarity.",
                    medium: "Align individual goals more closely with organizational objectives and provide clearer success criteria.",
                    high: "Your high performance standards drive excellence - ensure they remain motivating rather than overwhelming."
                }
            };

            // Find the lowest scoring areas for targeted recommendations
            const sortedScores = Object.entries(scores).sort((a, b) => a[1] - b[1]);
            let recommendationsHTML = '<div>';
            
            sortedScores.slice(0, 3).forEach(([key, score]) => {
                if (recommendations[key]) {
                    let level = score < 50 ? 'low' : score < 75 ? 'medium' : 'high';
                    recommendationsHTML += `
                        <div style="margin-bottom: 15px; padding: 15px; background: #ffffff; border-radius: 6px; border: 1px solid #e5e7eb;">
                            <div style="font-weight: 600; color: #1e3a8a; margin-bottom: 8px;">
                                ${key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase())} (${score}%)
                            </div>
                            <div style="color: #374151; line-height: 1.5;">
                                ${recommendations[key][level]}
                            </div>
                        </div>
                    `;
                }
            });
            
            recommendationsHTML += '</div>';
            container.innerHTML = recommendationsHTML;
        }

        function displayLeadershipImpactComparison(orgScores) {
            const container = document.getElementById('leadershipImpactComparison');
            
            // This would ideally compare individual leadership scores with organizational scores
            // For now, we'll provide general insights about organizational effectiveness
            
            const avgOrgScore = Object.values(orgScores).reduce((a, b) => a + b, 0) / Object.values(orgScores).length;
            let impactInsight = '';
            
            if (avgOrgScore >= 80) {
                impactInsight = `
                    <div style="color: #059669; font-weight: 600; margin-bottom: 10px;">🌟 High-Performing Organization</div>
                    <p style="margin-bottom: 10px;">Your organization demonstrates strong effectiveness across most dimensions (${Math.round(avgOrgScore)}% average). This creates an excellent environment for leadership development and high performance.</p>
                    <p><strong>Leadership Opportunity:</strong> Focus on sustaining excellence and helping other organizations learn from your success.</p>
                `;
            } else if (avgOrgScore >= 60) {
                impactInsight = `
                    <div style="color: #f59e0b; font-weight: 600; margin-bottom: 10px;">⚡ Growing Organization</div>
                    <p style="margin-bottom: 10px;">Your organization shows solid performance with opportunities for improvement (${Math.round(avgOrgScore)}% average). There are clear pathways to enhance effectiveness.</p>
                    <p><strong>Leadership Opportunity:</strong> Your individual leadership skills can significantly impact organizational performance by addressing key improvement areas.</p>
                `;
            } else {
                impactInsight = `
                    <div style="color: #dc2626; font-weight: 600; margin-bottom: 10px;">🎯 Transformation Opportunity</div>
                    <p style="margin-bottom: 10px;">Your organization has significant opportunities for improvement (${Math.round(avgOrgScore)}% average). This presents a tremendous leadership challenge and growth opportunity.</p>
                    <p><strong>Leadership Opportunity:</strong> Your leadership development is critical for driving organizational transformation and culture change.</p>
                `;
            }
            
            container.innerHTML = impactInsight;
        }

        // Modify the existing complete assessment function to transition to organizational feedback
        function completeAssessmentWithOrgFeedback() {
            // First complete the individual assessment normally
            if (demoMode || isExecutiveMode) {
                if (isExecutiveMode) {
                    // Get executive name for team tracking
                    const executiveName = prompt("Please enter your name for the executive team report:") || "Executive " + Date.now();
                    
                    // Calculate scores
                    const scores = calculateDemoScores();
                    
                    // Save to team data
                    saveExecutiveAssessment(executiveName, scores, personalizationData, responses);
                }
                
                // Show individual results first
                showResults();
                
                // After a brief delay, transition to organizational feedback
                setTimeout(() => {
                    // Hide individual results
                    document.getElementById('results').style.display = 'none';
                    
                    // Show organizational feedback section
                    document.getElementById('organizationalFeedback').style.display = 'block';
                    
                    // Scroll to organizational feedback
                    document.getElementById('organizationalFeedback').scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 2000); // 2 second delay to let user see their individual results first
            }
        }
    </script>
</body>
</html>